import{a as co}from"./chunk-2DE5BC62.js";import{a as Yn}from"./chunk-YVYARSZY.js";import{A as ae,B as se,C as no,D as un,E as gt,F as vt,G as Y,H as $,I as z,J as le,K as we,L as ve,M as io,N as Mn,O as Rn,P as Pn,Q as or,R as G,S as ro,T as oo,U as ao,X as W,Y as ze,Z as Se,a as ce,aa as zt,b as Re,ba as Gt,c as wt,da as he,ea as so,fa as lo,ga as te,ha as uo,ia as Kn,k as He,l as nr,la as qn,m as eo,n as Gn,o as Be,p as Sn,q as Dn,s as Vt,t as ir,u as to,v as S,x as Ee,y as rr}from"./chunk-B4JCPXUQ.js";var Xn=class e{constructor(t){this.http=t}BASE_URL="/api/v1/activities";run(t,n){return this.http.put(`${this.BASE_URL}/${n}/${t}/run`,{})}complete(t){return this.http.put(`${this.BASE_URL}/${t}/complete`,{})}retry(t){return this.http.put(`${this.BASE_URL}/${t}/retry`,{})}terminate(t){return this.http.put(`${this.BASE_URL}/${t}/terminate`,{})}static \u0275fac=function(n){return new(n||e)(Gn(qn))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};var Zn=class e{activityClient=Be(Xn);run(t,n){return this.activityClient.run(t,n)}complete(t){return this.activityClient.complete(t)}retry(t){return this.activityClient.retry(t)}terminate(t){return this.activityClient.terminate(t)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};function Ss(e,t){e&1&&($(0,"div",0),W(1," No actions available "),z())}function Ds(e,t){if(e&1){let n=Mn();$(0,"button",3),Pn("click",function(){let r=Sn(n).$implicit,o=G(2);return Dn(o.onActionClick(r))}),W(1),z()}if(e&2){let n=t.$implicit,i=G(2);Y("ngClass",i.buttonClass(n)),S(),Se(" ",n," ")}}function Ms(e,t){if(e&1&&($(0,"div",1),gt(1,Ds,2,2,"button",2,un),z()),e&2){let n=G();S(),vt(n.actions())}}var Qn=class e{definition=te(null);execution=te(null);processExecution=te(null);actions=he(()=>{if(this.processExecution()?.state==="COMPLETED")return[];if(!this.execution())return["Run"];let t=this.definition()?.type,n=this.execution()?.state,i=[];return n==="COMPLETED"||n==="TERMINATED"||n==="CANCELED"?[]:(n==="FAILED"&&i.push("Retry"),n==="ACTIVE"&&(t==="MESSAGE_INTERMEDIATE_CATCH_EVENT"||t==="RECEIVE_TASK"||t==="INTERMEDIATE_CATCH_EVENT")&&i.push("Complete"),n==="ACTIVE"&&i.push("Terminate"),i)});activityService=Be(Zn);buttonClass(t){switch(t){case"Run":return"btn-primary";case"Complete":return"btn-success";case"Terminate":return"btn-warning";case"Retry":return"btn-danger";default:return"btn-secondary"}}onActionClick(t){switch(t){case"Run":this.handleRun();break;case"Complete":this.handleComplete();break;case"Terminate":this.handleTerminate();break;case"Retry":this.handleRetry();break}}handleRun(){this.activityService.run(this.definition()?.id,this.processExecution()?.id).subscribe({next:()=>{console.log("Run successful")},error:t=>{console.log("Run failed: ",t.message||t.toString())}})}handleComplete(){this.activityService.complete(this.execution()?.id).subscribe({next:()=>{console.log("Complete successful")},error:t=>{console.log("Complete failed: ",t.message||t.toString())}})}handleTerminate(){this.activityService.terminate(this.execution()?.id).subscribe({next:()=>{console.log("Terminate successful")},error:t=>{console.log("Terminate failed: ",t.message||t.toString())}})}handleRetry(){this.activityService.retry(this.execution()?.id).subscribe({next:()=>{console.log("Retry successful")},error:t=>{console.log("Retry failed: ",t.message||t.toString())}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-actions-info"]],inputs:{definition:[1,"definition"],execution:[1,"execution"],processExecution:[1,"processExecution"]},decls:2,vars:1,consts:[[1,"form-control","bg-light",2,"white-space","pre-wrap"],[1,"d-flex","flex-wrap","gap-2"],["type","button",1,"btn","btn-sm",3,"ngClass"],["type","button",1,"btn","btn-sm",3,"click","ngClass"]],template:function(n,i){n&1&&ae(0,Ss,2,0,"div",0)(1,Ms,3,0,"div",1),n&2&&se(i.actions().length===0?0:1)},dependencies:[uo],encapsulation:2})};var Rs=(e,t)=>t[0];function Ps(e,t){if(e&1&&(we(0,"div",0),W(1),ve()),e&2){let n=G();S(),Se(" ",n.stringCondition()," ")}}function ks(e,t){if(e&1&&(we(0,"div",3),W(1),ve()),e&2){let n=t.$implicit;S(),Se(" ",n," ")}}function Is(e,t){if(e&1&&gt(0,ks,2,1,"div",3,un),e&2){let n=G().$implicit;vt(n[1])}}function Ts(e,t){if(e&1&&(we(0,"div",0),W(1),ve()),e&2){let n=G().$implicit;S(),Se(" ",n[1]," ")}}function Ns(e,t){if(e&1&&(we(0,"div",1)(1,"label",2),W(2),ve(),ae(3,Is,2,0)(4,Ts,2,1,"div",0),ve()),e&2){let n=t.$implicit,i=G(2);S(2),Se("",i.label(n[0]),":"),S(),se(i.isArray(n[1])?3:4)}}function Vs(e,t){if(e&1&&gt(0,Ns,5,2,"div",1,Rs),e&2){let n=G();vt(n.entries())}}var Jn=class e{conditions=te(void 0);entries=he(()=>{let t=this.conditions()??{};return Object.entries(t)});label(t){return t===""?"Default":t}isArray(t){return Array.isArray(t)}isString(){return typeof this.conditions()=="string"}stringCondition(){return this.conditions()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-condition-info"]],inputs:{conditions:[1,"conditions"]},decls:2,vars:1,consts:[[1,"form-control","bg-light",2,"white-space","pre-wrap"],[1,"mb-3"],[1,"form-label","fw-medium"],[1,"form-control","bg-light","mb-1",2,"white-space","pre-wrap"]],template:function(n,i){n&1&&ae(0,Ps,2,1,"div",0)(1,Vs,2,0),n&2&&se(i.isString()?0:1)},encapsulation:2})};var Os=(e,t)=>t[0];function Bs(e,t){if(e&1&&(we(0,"div",0)(1,"label",1),W(2),ve(),we(3,"div",2),W(4),ve()()),e&2){let n=t.$implicit;S(2),Se(" ",n[0],": "),S(2),Se(" ",n[1]," ")}}var ei=class e{data=te(new Map);entries=he(()=>Array.from(this.data()?.entries()??[]));static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-inputs-outputs-info"]],inputs:{data:[1,"data"]},decls:2,vars:0,consts:[[1,"mb-3"],[1,"form-label","fw-medium"],[1,"form-control","bg-light",2,"white-space","pre-wrap"]],template:function(n,i){n&1&&gt(0,Bs,5,2,"div",0,Os),n&2&&vt(i.entries())},encapsulation:2})};function Fs(e,t){if(e&1&&(we(0,"a",2),W(1),ve()),e&2){let n=G();Rn("href",n.link(),to),S(),ze(n.value()||"N/A")}}function Ls(e,t){if(e&1&&(we(0,"span"),W(1),ve()),e&2){let n=G();S(),ze(n.value()||"N/A")}}var cn=class e{key=te.required();value=te.required();link=te(null);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-plain-info"]],inputs:{key:[1,"key"],value:[1,"value"],link:[1,"link"]},decls:5,vars:2,consts:[[1,"mb-2"],[1,"fw-medium"],["target","_blank",1,"text-decoration-none",3,"href"]],template:function(n,i){n&1&&(we(0,"div",0)(1,"span",1),W(2),ve(),ae(3,Fs,2,2,"a",2)(4,Ls,2,1,"span"),ve()),n&2&&(S(2),Se("",i.key(),": "),S(),se(i.link()?3:4))},encapsulation:2})};var pn=class e{state=te.required();static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-state-info"]],inputs:{state:[1,"state"]},decls:4,vars:1,consts:[[1,"mb-2"],[1,"fw-medium"],[3,"state"]],template:function(n,i){n&1&&($(0,"div",0)(1,"span",1),W(2,"State: "),z(),le(3,"app-state-badge",2),z()),n&2&&(S(3),Y("state",i.state()))},dependencies:[co],encapsulation:2})};var js={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hf=Re(ce({},js),{"[class.ng-submitted]":"isSubmitted"});var Hs=new eo("",{providedIn:"root",factory:()=>po}),po="always";var $s=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=rr({type:e});static \u0275inj=nr({})}return e})();var fo=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Hs,useValue:n.callSetDisabledState??po}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=rr({type:e});static \u0275inj=nr({imports:[$s]})}return e})();var ti=class e{constructor(t){this.http=t}BASE_URL="/api/v1/runtime";setVariables(t,n){return this.http.put(`${this.BASE_URL}/${t}/variables`,n)}setVariablesLocal(t,n){return this.http.put(`${this.BASE_URL}/${t}/variables/local`,n)}correlateMessage(t,n,i,r){let o={message:t,businessKey:n,correlationKeys:i,processVariables:r};return this.http.put(`${this.BASE_URL}/correlate`,o)}static \u0275fac=function(n){return new(n||e)(Gn(qn))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};var ni=class e{runtimeClient=Be(ti);setVariables(t,n){return this.runtimeClient.setVariables(t,n)}setVariablesLocal(t,n){return this.runtimeClient.setVariablesLocal(t,n)}correlateMessage(t,n,i,r){return this.runtimeClient.correlateMessage(t,n,i,r)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};function Ws(e,t){if(e&1){let n=Mn();we(0,"input",7),or("input",function(r){Sn(n);let o=G().$index,l=G();return Dn(l.onInput(o,r.target.value,"varKey"))}),ve()}if(e&2){let n=G().$implicit;Rn("value",n.varKey)}}function Us(e,t){if(e&1&&(we(0,"div",4),W(1),ve()),e&2){let n=G().$implicit;S(),Se(" ",n.varKey," ")}}function zs(e,t){if(e&1){let n=Mn();we(0,"input",8),or("input",function(r){Sn(n);let o=G().$index,l=G();return Dn(l.onInput(o,r.target.value,"varValue"))}),ve()}if(e&2){let n=G().$implicit;Rn("placeholder",n.isNew?"value":"")("value",n.varValue)}}function Gs(e,t){if(e&1&&(we(0,"div",6),W(1),ve()),e&2){let n=G().$implicit;S(),Se(" ",n.varValue," ")}}function Ks(e,t){if(e&1&&(we(0,"div",0)(1,"div",1)(2,"span",2),W(3),ve(),ae(4,Ws,1,1,"input",3)(5,Us,2,1,"div",4),ae(6,zs,1,2,"input",5)(7,Gs,2,1,"div",6),ve()()),e&2){let n=t.$implicit,i=G();S(3),ze(n.type),S(),se(n.isNew?4:5),S(2),se(i.canUpdate()?6:7)}}var dn=class e{executionId=te();variables=te(null);processExecution=te(null);runtimeService=Be(ni);editableVariables=Vt([]);variablesSignal=he(()=>this.editableVariables());canUpdate=he(()=>{let t=this.processExecution()?.state;return t==="ACTIVE"||t==="INCIDENT"});hasChanges=he(()=>this.editableVariables().some(t=>t.isNew||t.varValue!==t.originalValue));constructor(){so(()=>{let t=this.variables();t&&this.editableVariables.set(t.map(this.toEditable))})}onInput(t,n,i){this.editableVariables.update(r=>{let o=[...r];return o[t]=Re(ce({},o[t]),{[i]:n}),o})}onUpdate(){let t=this.executionId();if(!t)return;let n=this.collectChanges();Object.keys(n).length!==0&&this.runtimeService.setVariablesLocal(t,n).subscribe(()=>{this.markAsSaved()})}addNewVariable(){this.editableVariables.update(t=>[...t,{varKey:"",varValue:"",type:"string",originalValue:"",isNew:!0}])}toEditable(t){return{id:t.id,varKey:t.varKey,varValue:t.varValue,type:t.type,originalValue:t.varValue,isNew:!1}}collectChanges(){let t={};for(let n of this.editableVariables())(n.isNew||n.varValue!==n.originalValue)&&(t[n.varKey]=n.varValue);return t}markAsSaved(){this.editableVariables.update(t=>t.map(n=>Re(ce({},n),{originalValue:n.varValue,isNew:!1})))}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-variables-info"]],inputs:{executionId:[1,"executionId"],variables:[1,"variables"],processExecution:[1,"processExecution"]},decls:2,vars:0,consts:[[1,"mb-2","variable-block"],[1,"p-2"],[1,"text-black-50","small"],["type","text","placeholder","key",1,"form-control","mb-1",3,"value"],[1,"form-control","bg-light","mb-1"],["type","text",1,"form-control",3,"placeholder","value"],[1,"form-control","bg-light"],["type","text","placeholder","key",1,"form-control","mb-1",3,"input","value"],["type","text",1,"form-control",3,"input","placeholder","value"]],template:function(n,i){n&1&&gt(0,Ks,8,3,"div",0,no),n&2&&vt(i.variablesSignal())},dependencies:[Kn,fo],styles:["input[_ngcontent-%COMP%]:focus{box-shadow:none}.variable-block[_ngcontent-%COMP%]:not(:last-child) > div[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}"]})};function qs(e,t){if(e&1&&le(0,"app-plain-info",12),e&2){let n,i=G();Y("key","Name")("value",(n=i.definition())==null?null:n.name)}}function Ys(e,t){if(e&1&&le(0,"app-plain-info",12),e&2){let n,i=G();Y("key","Topic")("value",(n=i.definition())==null?null:n.topic)}}function Xs(e,t){if(e&1&&le(0,"app-plain-info",13),e&2){let n,i,r=G();Y("value",(n=r.definition())==null?null:n.calledElement)("link","/definitions/"+((i=r.definition())==null?null:i.calledElement))}}function Zs(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",14),W(3," Conditions "),z()(),$(4,"div",15)(5,"div",11),le(6,"app-condition-info",16),z()()()),e&2){let n,i=G();S(6),Y("conditions",(n=i.definition())==null?null:n.condition)}}function Qs(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",17),W(3," Message "),z()(),$(4,"div",18)(5,"div",11)(6,"div",19),W(7),z()()()()),e&2){let n,i=G();S(7),Se(" ",(n=i.definition())==null?null:n.messageReference," ")}}function Js(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",20),W(3," Error "),z()(),$(4,"div",21)(5,"div",11),le(6,"app-plain-info",12)(7,"app-plain-info",12)(8,"app-plain-info",12),z()()()),e&2){let n,i,r,o=G();S(6),Y("key","Name")("value",(n=o.error())==null?null:n.name),S(),Y("key","Code")("value",(i=o.error())==null?null:i.errorCode),S(),Y("key","Message")("value",(r=o.error())==null?null:r.message)}}function el(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",22),W(3," Inputs "),$(4,"span",23),W(5),z()()(),$(6,"div",24)(7,"div",11),le(8,"app-inputs-outputs-info",25),z()()()),e&2){let n=G();S(5),ze(n.inputs().size),S(3),Y("data",n.inputs())}}function tl(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",22),W(3," Outputs "),$(4,"span",23),W(5),z()()(),$(6,"div",24)(7,"div",11),le(8,"app-inputs-outputs-info",25),z()()()),e&2){let n=G();S(5),ze(n.outputs().size),S(3),Y("data",n.outputs())}}function nl(e,t){if(e&1&&le(0,"app-plain-info",29),e&2){let n,i,r=G(2);Y("key","Execution ID")("value",(n=r.execution())==null?null:n.id)("link","/processes/"+((i=r.execution())==null?null:i.id))}}function il(e,t){if(e&1&&le(0,"app-plain-info",12),e&2){let n,i=G(2);Y("key","Execution ID")("value",(n=i.execution())==null?null:n.id)}}function rl(e,t){if(e&1&&le(0,"app-plain-info",12),e&2){let n,i=G(2);Y("key","Retries (current)")("value",(n=i.execution())==null?null:n.retries)}}function ol(e,t){if(e&1&&le(0,"app-variables-info",32),e&2){let n,i,r=G(2);Y("executionId",(n=r.execution())==null?null:n.id)("variables",(i=r.execution())==null?null:i.variables)}}function al(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",26),W(3," Execution "),z()(),$(4,"div",27)(5,"div",11),le(6,"app-state-info",28),ae(7,nl,1,3,"app-plain-info",29)(8,il,1,2,"app-plain-info",12),ae(9,rl,1,2,"app-plain-info",12),le(10,"app-plain-info",12),zt(11,"dateFormat"),le(12,"app-plain-info",12),zt(13,"dateFormat"),z()()(),$(14,"div",7)(15,"h2",8)(16,"button",30),W(17," Variables "),$(18,"span",23),W(19),z()()(),$(20,"div",31)(21,"div",11),ae(22,ol,1,2,"app-variables-info",32),z()()()),e&2){let n,i,r,o,l,u=G();S(6),Y("state",(n=u.execution())==null?null:n.state),S(),se(u.isCallActivity()?7:8),S(2),se(u.showCurrentRetries()?9:-1),S(),Y("key","Started")("value",Gt(11,9,(i=u.execution())==null?null:i.startedAt)),S(2),Y("key","Completed")("value",Gt(13,11,(r=u.execution())==null?null:r.completedAt)),S(7),ze((o=u.execution())==null||o.variables==null?null:o.variables.length),S(3),se(((l=u.execution())==null?null:l.variables)!==null&&((l=u.execution())==null?null:l.variables)!==void 0?22:-1)}}function sl(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",33),W(3," Actions "),z()(),$(4,"div",34)(5,"div",11),le(6,"app-actions-info",35),z()()()),e&2){let n=G();S(6),Y("definition",n.definition())("execution",n.execution())("processExecution",n.processExecution())}}var ii=class e{definition=te(null);execution=te(null);processDefinition=te(null);processExecution=te(null);isExecution=he(()=>!!this.execution());isCallActivity=he(()=>this.definition()?.type==="CALL_ACTIVITY");definitionType=he(()=>this.definition()?.type?.replace(/_/g," "));definitionTitle=he(()=>this.definition()?.name||this.definition()?.id);inputs=he(()=>new Map(Object.entries(this.definition()?.inputs??{})));outputs=he(()=>new Map(Object.entries(this.definition()?.outputs??{})));isActiveProcess=he(()=>{let t=this.processExecution()?.state;return!!this.processExecution()&&t==="ACTIVE"||t==="INCIDENT"});showCurrentRetries=he(()=>{let t=this.execution()?.retries;return t!=null&&t>0});error=he(()=>{let t=this.definition()?.errorCode;return this.processDefinition()?.errors.find(n=>n.errorCode===t)});static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-bpmn-activity-info-panel"]],inputs:{definition:[1,"definition"],execution:[1,"execution"],processDefinition:[1,"processDefinition"],processExecution:[1,"processExecution"]},decls:27,vars:14,consts:[[1,"card","border-0","w-100"],[1,"card-header","bg-light"],[1,"d-flex","align-items-center"],[1,"bi","bi-envelope","me-1"],[1,"fw-bold","text-uppercase","small"],[1,"text-muted"],[1,"accordion","accordion-flush"],[1,"accordion-item","border-bottom"],[1,"accordion-header"],["data-bs-target","#collapseGeneral","data-bs-toggle","collapse","type","button",1,"accordion-button"],["id","collapseGeneral",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[3,"key","value"],["key","Called element",3,"value","link"],["data-bs-target","#collapseConditions","data-bs-toggle","collapse","type","button",1,"accordion-button","collapsed"],["id","collapseConditions",1,"accordion-collapse","collapse"],[3,"conditions"],["data-bs-target","#collapseMessage","data-bs-toggle","collapse","type","button",1,"accordion-button"],["id","collapseMessage",1,"accordion-collapse","collapse","show"],[1,"mb-2"],["data-bs-target","#collapseError","data-bs-toggle","collapse","type","button",1,"accordion-button"],["id","collapseError",1,"accordion-collapse","collapse","show"],["data-bs-target","#collapseInputs","data-bs-toggle","collapse","type","button",1,"accordion-button","collapsed"],[1,"badge","bg-secondary","ms-2"],["id","collapseInputs",1,"accordion-collapse","collapse"],[3,"data"],["data-bs-target","#collapseExecution","data-bs-toggle","collapse","type","button",1,"accordion-button"],["id","collapseExecution",1,"accordion-collapse","collapse","show"],[3,"state"],[3,"key","value","link"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseVariables",1,"accordion-button","collapsed"],["id","collapseVariables",1,"accordion-collapse","collapse"],[3,"executionId","variables"],["data-bs-target","#collapseActions","data-bs-toggle","collapse","type","button",1,"accordion-button"],["id","collapseActions",1,"accordion-collapse","collapse","show"],[3,"definition","execution","processExecution"]],template:function(n,i){if(n&1&&($(0,"div",0)(1,"div",1)(2,"div",2),le(3,"i",3),$(4,"div")(5,"div",4),W(6),z(),$(7,"div",5),W(8),z()()()(),$(9,"div",6)(10,"div",7)(11,"h2",8)(12,"button",9),W(13," General "),z()(),$(14,"div",10)(15,"div",11),ae(16,qs,1,2,"app-plain-info",12),le(17,"app-plain-info",12),ae(18,Ys,1,2,"app-plain-info",12),ae(19,Xs,1,2,"app-plain-info",13),z()()(),ae(20,Zs,7,1,"div",7),ae(21,Qs,8,1,"div",7),ae(22,Js,9,6,"div",7),ae(23,el,9,2,"div",7),ae(24,tl,9,2,"div",7),ae(25,al,23,13),ae(26,sl,7,3,"div",7),z()()),n&2){let r,o,l,u,c,f;S(6),ze(i.definitionType()),S(2),ze(i.definitionTitle()),S(8),se((r=i.definition())!=null&&r.name?16:-1),S(),Y("key","ID")("value",(o=i.definition())==null?null:o.id),S(),se((l=i.definition())!=null&&l.topic?18:-1),S(),se(i.isCallActivity()?19:-1),S(),se((u=i.definition())!=null&&u.condition?20:-1),S(),se((c=i.definition())!=null&&c.messageReference?21:-1),S(),se((f=i.definition())!=null&&f.errorCode?22:-1),S(),se(i.inputs().size!==0?23:-1),S(),se(i.outputs().size!==0?24:-1),S(),se(i.isExecution()?25:-1),S(),se(i.isActiveProcess()?26:-1)}},dependencies:[cn,ei,pn,Jn,Qn,dn,Yn],styles:[".card[_ngcontent-%COMP%]{border-radius:.375rem}.accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none}"]})};function ll(e,t){if(e&1&&(we(0,"div",0),W(1),ve()),e&2){let n=t.$implicit;S(),Se(" ",n," ")}}function ul(e,t){if(e&1&&gt(0,ll,2,1,"div",0,un),e&2){let n=G();vt(n.messages())}}var ri=class e{messages=te([]);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-messages-info"]],inputs:{messages:[1,"messages"]},decls:1,vars:1,consts:[[1,"form-control","bg-light","mb-1",2,"white-space","pre-wrap"]],template:function(n,i){n&1&&ae(0,ul,2,0),n&2&&se(i.messages()!==null&&i.messages()!==void 0?0:-1)},encapsulation:2})};function cl(e,t){if(e&1&&le(0,"app-variables-info",19),e&2){let n,i,r=G(2);Y("executionId",(n=r.execution())==null?null:n.id)("variables",(i=r.execution())==null?null:i.variables)}}function pl(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",13),W(3," Execution "),z()(),$(4,"div",14)(5,"div",11),le(6,"app-state-info",15)(7,"app-plain-info",12)(8,"app-plain-info",12)(9,"app-plain-info",12),zt(10,"dateFormat"),le(11,"app-plain-info",12),zt(12,"dateFormat"),z()()(),$(13,"div",7)(14,"h2",8)(15,"button",16),W(16," Variables "),$(17,"span",17),W(18),z()()(),$(19,"div",18)(20,"div",11),ae(21,cl,1,2,"app-variables-info",19),z()()()),e&2){let n,i,r,o,l,u,c,f=G();S(6),Y("state",(n=f.execution())==null?null:n.state),S(),Y("key","Execution ID")("value",(i=f.execution())==null?null:i.id),S(),Y("key","Business Key")("value",(r=f.execution())==null?null:r.businessKey),S(),Y("key","Started")("value",Gt(10,11,(o=f.execution())==null?null:o.startedAt)),S(2),Y("key","Completed")("value",Gt(12,13,(l=f.execution())==null?null:l.completedAt)),S(7),ze((u=f.execution())==null||u.variables==null?null:u.variables.length),S(3),se(((c=f.execution())==null?null:c.variables)!==null&&((c=f.execution())==null?null:c.variables)!==void 0?21:-1)}}function dl(e,t){if(e&1&&($(0,"div",7)(1,"h2",8)(2,"button",20),W(3," Messages "),$(4,"span",17),W(5),z()()(),$(6,"div",21)(7,"div",11),le(8,"app-messages-info",22),z()()()),e&2){let n,i,r=G();S(5),ze((n=r.definition())==null||n.messages==null?null:n.messages.length),S(3),Y("messages",(i=r.definition())==null?null:i.messages)}}var oi=class e{definition=te(null);execution=te(null);processDefinition=he(()=>this.definition()??this.execution()?.definition);isExecution=he(()=>!!this.execution());showMessages=he(()=>{let t=this.processDefinition()?.messages;return Array.isArray(t)&&t.length>0});static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-bpmn-process-info-panel"]],inputs:{definition:[1,"definition"],execution:[1,"execution"]},decls:25,vars:17,consts:[[1,"card","border-0","w-100"],[1,"card-header","bg-light"],[1,"d-flex","align-items-center"],[1,"bi","bi-envelope","me-1"],[1,"fw-bold","text-uppercase","small"],[1,"text-muted"],[1,"accordion","accordion-flush"],[1,"accordion-item","border-bottom"],[1,"accordion-header"],["data-bs-target","#collapseGeneral","data-bs-toggle","collapse","type","button",1,"accordion-button"],["id","collapseGeneral",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[3,"key","value"],["data-bs-target","#collapseExecution","data-bs-toggle","collapse","type","button",1,"accordion-button"],["id","collapseExecution",1,"accordion-collapse","collapse","show"],[3,"state"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseVariables",1,"accordion-button","collapsed"],[1,"badge","bg-secondary","ms-2"],["id","collapseVariables",1,"accordion-collapse","collapse"],[3,"executionId","variables"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseMessages",1,"accordion-button","collapsed"],["id","collapseMessages",1,"accordion-collapse","collapse"],[3,"messages"]],template:function(n,i){if(n&1&&($(0,"div",0)(1,"div",1)(2,"div",2),le(3,"i",3),$(4,"div")(5,"div",4),W(6,"Process"),z(),$(7,"div",5),W(8),z()()()(),$(9,"div",6)(10,"div",7)(11,"h2",8)(12,"button",9),W(13," General "),z()(),$(14,"div",10)(15,"div",11),le(16,"app-plain-info",12)(17,"app-plain-info",12)(18,"app-plain-info",12)(19,"app-plain-info",12),zt(20,"dateFormat"),le(21,"app-plain-info",12),zt(22,"dateFormat"),z()()(),ae(23,pl,22,15),ae(24,dl,9,2,"div",7),z()()),n&2){let r,o,l,u,c,f;S(8),ze((r=i.processDefinition())==null?null:r.name),S(8),Y("key","Process ID")("value",(o=i.processDefinition())==null?null:o.id),S(),Y("key","Process name")("value",(l=i.processDefinition())==null?null:l.name),S(),Y("key","Version")("value",(u=i.processDefinition())==null?null:u.version),S(),Y("key","Created")("value",Gt(20,13,(c=i.processDefinition())==null?null:c.createdAt)),S(2),Y("key","Updated")("value",Gt(22,15,(f=i.processDefinition())==null?null:f.updatedAt)),S(2),se(i.isExecution()?23:-1),S(),se(i.showMessages()?24:-1)}},dependencies:[dn,cn,pn,ri,Yn],styles:[".card[_ngcontent-%COMP%]{border-radius:.375rem}.accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none}"]})};var ai=class e{selection=te(null);isProcessSelected=he(()=>this.selection()?.isProcessElement);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-bpmn-element-info-panel"]],inputs:{selection:[1,"selection"]},decls:3,vars:8,consts:[[3,"definition","execution","hidden"],[3,"definition","execution","hidden","processDefinition","processExecution"]],template:function(n,i){if(n&1&&($(0,"div"),le(1,"app-bpmn-process-info-panel",0)(2,"app-bpmn-activity-info-panel",1),z()),n&2){let r,o,l,u,c,f;S(),Y("definition",(r=i.selection())==null?null:r.processDefinition)("execution",(o=i.selection())==null?null:o.process)("hidden",!i.isProcessSelected()),S(),Y("definition",(l=i.selection())==null?null:l.activityDefinition)("execution",(u=i.selection())==null?null:u.activity)("hidden",i.isProcessSelected())("processDefinition",(c=i.selection())==null?null:c.processDefinition)("processExecution",(f=i.selection())==null?null:f.process)}},dependencies:[ii,oi],styles:[".card[_ngcontent-%COMP%]{border-radius:.375rem}.accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none}"]})};var Kt=class e{isProcessElement(t){return["bpmn:Process","bpmn:Participant","bpmn:Collaboration"].includes(t?.businessObject?.$type)}findActivityDefinition(t,n){return n?.activities?.find(i=>i.id===t.businessObject.id)??null}findActivity(t,n){return n?.activities?.find(i=>i.definitionId===t.businessObject.id)??null}createSelection(t,n,i){let r=n??i?.definition,o=this.isProcessElement(t),l=o?null:this.findActivityDefinition(t,r),u=o?null:this.findActivity(t,i);return{element:t,processDefinition:r,process:i,activityDefinition:l,activity:u,isProcessElement:o}}findDefaultProcessElement(t){return t.find(n=>this.isProcessElement(n))??null}static \u0275fac=function(n){return new(n||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};function Ne(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}var kn=Object.prototype.toString,fl=Object.prototype.hasOwnProperty;function si(e){return e===void 0}function tn(e){return e!==void 0}function ar(e){return e==null}function ke(e){return kn.call(e)==="[object Array]"}function Ze(e){return kn.call(e)==="[object Object]"}function Qe(e){return kn.call(e)==="[object Number]"}function Et(e){let t=kn.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Je(e){return kn.call(e)==="[object String]"}function At(e,t){return!ar(e)&&fl.call(e,t)}function Ie(e,t){let n=ur(t),i;return R(e,function(r,o){if(n(r,o))return i=r,!1}),i}function ho(e,t){let n=ur(t),i=ke(e)?-1:void 0;return R(e,function(r,o){if(n(r,o))return i=o,!1}),i}function St(e,t){let n=ur(t),i=[];return R(e,function(r,o){n(r,o)&&i.push(r)}),i}function R(e,t){let n,i;if(si(e))return;let r=ke(e)?ml:hl;for(let o in e)if(At(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function Dt(e,t,n){return R(e,function(i,r){n=t(n,i,r)}),n}function sr(e,t){return!!Dt(e,function(n,i,r){return n&&t(i,r)},!0)}function li(e,t){return!!Ie(e,t)}function mo(e,t){let n=[];return R(e,function(i,r){n.push(t(i,r))}),n}function lr(e){return function(t){return sr(e,function(n,i){return t[i]===n})}}function ur(e){return Et(e)?e:t=>t===e}function hl(e){return e}function ml(e){return Number(e)}function yo(e,t){let n,i,r,o;function l(C){let H=Date.now(),q=C?0:o+t-H;if(q>0)return u(q);e.apply(r,i),c()}function u(C){n=setTimeout(l,C)}function c(){n&&clearTimeout(n),n=o=i=r=void 0}function f(){n&&l(!0),c()}function g(...C){o=Date.now(),i=C,r=this,n||u(t)}return g.flush=f,g.cancel=c,g}function it(e,t){return e.bind(t)}function P(e,...t){return Object.assign(e,...t)}function go(e,t,n){let i=e;return R(t,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let l=t[o+1],u=i[r];tn(l)&&ar(u)&&(u=i[r]=isNaN(+l)?{}:[]),si(l)?si(n)?delete i[r]:i[r]=n:i=u}),e}function vo(e,t){let n={},i=Object(e);return R(t,function(r){r in i&&(n[r]=e[r])}),n}function _o(e,t){let n={},i=Object(e);return R(i,function(r,o){t.indexOf(o)===-1&&(n[o]=r)}),n}var yl=1e3;function pt(e,t){var n=this;t=t||yl,e.on(["render.shape","render.connection"],t,function(i,r){var o=i.type,l=r.element,u=r.gfx,c=r.attrs;if(n.canRender(l))return o==="render.shape"?n.drawShape(u,l,c):n.drawConnection(u,l,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}pt.prototype.canRender=function(e){};pt.prototype.drawShape=function(e,t){};pt.prototype.drawConnection=function(e,t){};pt.prototype.getShapePath=function(e){};pt.prototype.getConnectionPath=function(e){};function T(e,t){var n=fe(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Eo(e,t){return li(t,function(n){return T(e,n)})}function fe(e){return e&&e.businessObject||e}function dt(e){return e&&e.di}function Ot(e,t){return T(e,"bpmn:CallActivity")?!1:T(e,"bpmn:SubProcess")?(t=t||dt(e),t&&T(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):T(e,"bpmn:Participant")?!!fe(e).processRef:!0}function cr(e){if(!(!T(e,"bpmn:Participant")&&!T(e,"bpmn:Lane"))){var t=dt(e).isHorizontal;return t===void 0?!0:t}}function bo(e){return e&&!!fe(e).triggeredByEvent}function xo(e){return Ze(e)&&At(e,"waypoints")}var ui={width:90,height:20},Co=15;function wo(e){return T(e,"bpmn:Event")||T(e,"bpmn:Gateway")||T(e,"bpmn:DataStoreReference")||T(e,"bpmn:DataObjectReference")||T(e,"bpmn:DataInput")||T(e,"bpmn:DataOutput")||T(e,"bpmn:SequenceFlow")||T(e,"bpmn:MessageFlow")||T(e,"bpmn:Group")}function gl(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=vl(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),l=r.x,u=r.y;return Math.abs(o)<Math.PI/2?u-=Co:l+=Co,{x:l,y:u}}function vl(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function _l(e){return e.waypoints?gl(e.waypoints):T(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+ui.height/2}:{x:e.x+e.width/2,y:e.y+e.height+ui.height/2}}function Ao(e,t){var n,i,r,o=e.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(ui.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=_l(t),i=ui),P({x:n.x-i.width/2,y:n.y-i.height/2},i)}function El(e){if(T(e,"bpmn:FlowElement")||T(e,"bpmn:Participant")||T(e,"bpmn:Lane")||T(e,"bpmn:SequenceFlow")||T(e,"bpmn:MessageFlow")||T(e,"bpmn:DataInput")||T(e,"bpmn:DataOutput"))return"name";if(T(e,"bpmn:TextAnnotation"))return"text";if(T(e,"bpmn:Group"))return"categoryValueRef"}function bl(e){var t=e.categoryValueRef;return t&&t.value||""}function fn(e){var t=e.businessObject,n=El(t);if(n)return n==="categoryValueRef"?bl(t):t[n]||""}function xl(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function Ro(e,t){return t.appendChild(xl(e,t))}function _e(e,t){return Ro(t,e),e}var fr=2,Po={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":fr,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":fr,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Cl(e,t){return Po[t]?e.style[t]:e.getAttributeNS(null,t)}function ko(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Po[i];r?(r===fr&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function wl(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)ko(e,r,t[r])}function ne(e,t,n){if(typeof t=="string")if(n!==void 0)ko(e,t,n);else return Cl(e,t);else wl(e,t);return e}var Al=Object.prototype.toString;function rt(e){return new qt(e)}function qt(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}qt.prototype.add=function(e){return this.list.add(e),this};qt.prototype.remove=function(e){return Al.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};qt.prototype.removeMatching=function(e){let t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};qt.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};qt.prototype.array=function(){return Array.from(this.list)};qt.prototype.has=qt.prototype.contains=function(e){return this.list.contains(e)};function Sl(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}var mr={svg:"http://www.w3.org/2000/svg"},So='<svg xmlns="'+mr.svg+'"';function Io(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(mr.svg)===-1&&(e=So+e.substring(4)):(e=So+">"+e+"</svg>",t=!0);var n=Dl(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Dl(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function ie(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=Io(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(mr.svg,e),t&&ne(n,t),n}var pr=null;function hr(){return pr===null&&(pr=ie("svg")),pr}function Do(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function To(e,t,n,i,r,o){var l=hr().createSVGMatrix();switch(arguments.length){case 0:return l;case 1:return Do(l,e);case 6:return Do(l,{a:e,b:t,c:n,d:i,e:r,f:o})}}function hn(e){return e?hr().createSVGTransformFromMatrix(e):hr().createSVGTransform()}var Mo=/([&<>]{1})/g,Ml=/([&<>\n\r"]{1})/g,Rl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function dr(e,t){function n(i,r){return Rl[r]||r}return e.replace(t,n)}function No(e,t){var n,i,r,o,l;switch(e.nodeType){case 3:t.push(dr(e.textContent,Mo));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',dr(o.value,Ml),'"');if(e.hasChildNodes()){for(t.push(">"),l=e.childNodes,n=0,i=l.length;n<i;++n)No(l.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",dr(e.nodeValue,Mo),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Pl(e,t){var n=Io(t);if(Sl(e),!!t){Il(n)||(n=n.documentElement);for(var i=Tl(n.childNodes),r=0;r<i.length;r++)Ro(i[r],e)}}function kl(e){for(var t=e.firstChild,n=[];t;)No(t,n),t=t.nextSibling;return n.join("")}function Il(e){return e.nodeName==="#document-fragment"}function yr(e,t){if(t!==void 0){try{Pl(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return kl(e)}function Tl(e){return Array.prototype.slice.call(e)}function Bt(e){var t=e.parentNode;return t&&t.removeChild(e),e}function Nl(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Vl(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Nl(e,i))}function nn(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Vl(n,t)),n.consolidate()}function Ft(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function Ol(e){return["M",e.x,e.y]}function gr(e){return["L",e.x,e.y]}function Bl(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function Fl(e,t){let n=e.length,i=[Ol(e[0])];for(let r=1;r<n;r++){let o=e[r-1],l=e[r],u=e[r+1];if(!u||!t){i.push(gr(l));continue}let c=Math.min(t,vr(l.x-o.x,l.y-o.y),vr(u.x-l.x,u.y-l.y));if(!c){i.push(gr(l));continue}let f=ci(l,o,c),g=ci(l,o,c*.5),C=ci(l,u,c),H=ci(l,u,c*.5);i.push(gr(f)),i.push(Bl(g,H,C))}return i}function ci(e,t,n){let i=t.x-e.x,r=t.y-e.y,o=vr(i,r),l=n/o;return{x:e.x+i*l,y:e.y+r*l}}function vr(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function mn(e,t,n){Qe(t)&&(n=t,t=null),t||(t={});let i=ie("path",t);return Qe(n)&&(i.dataset.cornerRadius=String(n)),_r(i,e)}function _r(e,t){let n=parseInt(e.dataset.cornerRadius,10)||0;return ne(e,{d:Ft(Fl(t,n))}),e}var pi="hsl(225, 10%, 15%)",Ll="white";function bt(e,t){return li(e.eventDefinitions,function(n){return n.$type===t})}function Vo(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function Oo(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function K(e,t,n){var i=dt(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||Ll}function M(e,t,n){var i=dt(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||pi}function yn(e,t,n,i){var r=dt(e),o=r.get("label");return i||o&&o.get("color:color")||t||M(e,n)}function Bo(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Ft(r)}function Fo(e,t){var n=e.x,i=e.y,r=e.width,o=e.height,l=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return Ft(l)}function Lo(e){var t=e.width,n=e.height,i=e.x,r=e.y,o=t/2,l=n/2,u=[["M",i+o,r],["l",o,l],["l",-o,l],["l",-o,-l],["z"]];return Ft(u)}function jo(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return Ft(o)}function gn(e,t={}){return{width:ot(e,t),height:Ge(e,t)}}function ot(e,t={}){return At(t,"width")?t.width:e.width}function Ge(e,t={}){return At(t,"height")?t.height:e.height}function jl(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}var Hl=Object.prototype.toString,$l=Object.prototype.hasOwnProperty;function Wl(e){return e===void 0}function Ul(e){return Hl.call(e)==="[object Array]"}function zl(e,t){return $l.call(e,t)}function Ho(e,t){let n,i;if(Wl(e))return;let r=Ul(e)?Kl:Gl;for(let o in e)if(zl(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function Gl(e){return e}function Kl(e){return Number(e)}function Ve(e,...t){let n=e.style;return Ho(t,function(i){i&&Ho(i,function(r,o){n[o]=r})}),e}function mi(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}var ql=Object.prototype.toString;function Lt(e){return new Yt(e)}function Yt(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Yt.prototype.add=function(e){return this.list.add(e),this};Yt.prototype.remove=function(e){return ql.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Yt.prototype.removeMatching=function(e){let t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Yt.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Yt.prototype.array=function(){return Array.from(this.list)};Yt.prototype.has=Yt.prototype.contains=function(e){return this.list.contains(e)};function yi(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function br(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var fi={},hi,Er,xr;function $o(){hi=window.addEventListener?"addEventListener":"attachEvent",Er=window.removeEventListener?"removeEventListener":"detachEvent",xr=hi!=="addEventListener"?"on":""}var Yl=fi.bind=function(e,t,n,i){return hi||$o(),e[hi](xr+t,n,i||!1),n},Xl=fi.unbind=function(e,t,n,i){return Er||$o(),e[Er](xr+t,n,i||!1),n},$e=jl({__proto__:null,bind:Yl,unbind:Xl,default:fi},[fi]),Wo=["focus","blur"];function Zl(e,t,n,i,r){return Wo.indexOf(n)!==-1&&(r=!0),$e.bind(e,n,function(o){var l=o.target||o.srcElement;o.delegateTarget=br(l,t,!0),o.delegateTarget&&i.call(e,o)},r)}function Ql(e,t,n,i){return Wo.indexOf(t)!==-1&&(i=!0),$e.unbind(e,t,n,i)}var In={bind:Zl,unbind:Ql},Jl=eu,Uo=!1,di;typeof document<"u"&&(di=document.createElement("div"),di.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Uo=!di.getElementsByTagName("link").length,di=void 0);var De={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Uo?[1,"X<div>","</div>"]:[0,"",""]};De.td=De.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];De.option=De.optgroup=[1,'<select multiple="multiple">',"</select>"];De.thead=De.tbody=De.colgroup=De.caption=De.tfoot=[1,"<table>","</table>"];De.polyline=De.ellipse=De.polygon=De.circle=De.text=De.line=De.path=De.rect=De.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function eu(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Object.prototype.hasOwnProperty.call(De,i)?De[i]:De._default,o=r[0],l=r[1],u=r[2],c=t.createElement("div");for(c.innerHTML=l+e+u;o--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var f=t.createDocumentFragment();c.firstChild;)f.appendChild(c.removeChild(c.firstChild));return f}var Ke=Jl;function at(e,t){return t=t||document,t.querySelector(e)}function zo(e,t){return t=t||document,t.querySelectorAll(e)}function vn(e){e.parentNode&&e.parentNode.removeChild(e)}function gi(e,t,n,i,r){var o=hn();o.setTranslate(t,n);var l=hn();l.setRotate(i||0,0,0);var u=hn();u.setScale(r||1,r||1),nn(e,[o,l,u])}function vi(e,t,n){var i=hn();i.setTranslate(t,n),nn(e,i)}function Go(e,t){var n=hn();n.setRotate(t,0,0),nn(e,n)}function tu(e,t){return t={exports:{}},e(t,t.exports),t.exports}var nu=tu(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;for(var l=r-Math.floor(r),u="",o=0;o<Math.floor(r);o++){var c=Math.floor(Math.random()*i).toString(i);u=c+u}if(l){var f=Math.pow(i,l),c=Math.floor(Math.random()*f).toString(i);u=c+u}var g=parseInt(u,i);return g!==1/0&&g>=Math.pow(2,n)?t(n,i):u};t.rack=function(n,i,r){var o=function(u){var c=0;do{if(c++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var f=t(n,i)}while(Object.hasOwnProperty.call(l,f));return l[f]=u,f},l=o.hats={};return o.get=function(u){return o.hats[u]},o.set=function(u,c){return o.hats[u]=c,o},o.bits=n||128,o.base=i||16,o}});function jt(e){if(!(this instanceof jt))return new jt(e);e=e||[128,36,1],this._seed=e.length?nu.rack(e[0],e[1],e[2]):e}jt.prototype.next=function(e){return this._seed(e||!0)};jt.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};jt.prototype.claim=function(e,t){this._seed.set(e,t||!0)};jt.prototype.assigned=function(e){return this._seed.get(e)||!1};jt.prototype.unclaim=function(e){delete this._seed.hats[e]};jt.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var Ko=jt;var iu=new Ko,ru=10,_i=3,ou=1.5,Ei=10,_n=.95,au=1,su=.25;function Ht(e,t,n,i,r,o,l){pt.call(this,t,l);var u=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,f=e&&e.defaultLabelColor;function g(p){return n.computeStyle(p,{strokeLinecap:"round",strokeLinejoin:"round",stroke:pi,strokeWidth:2,fill:"white"})}function C(p){return n.computeStyle(p,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:pi,strokeWidth:2})}function H(p,s){var{ref:a={x:0,y:0},scale:d=1,element:h,parentGfx:y=r._svg}=s,b=ie("marker",{id:p,viewBox:"0 0 20 20",refX:a.x,refY:a.y,markerWidth:20*d,markerHeight:20*d,orient:"auto"});_e(b,h);var O=at(":scope > defs",y);O||(O=ie("defs"),_e(y,O)),_e(O,b)}function q(p,s,a,d){var h=iu.nextPrefixed("marker-");return me(p,h,s,a,d),"url(#"+h+")"}function me(p,s,a,d,h){if(a==="sequenceflow-end"){var y=ie("path",ce({d:"M 1 5 L 11 10 L 1 15 Z"},g({fill:h,stroke:h,strokeWidth:1})));H(s,{element:y,ref:{x:11,y:10},scale:.5,parentGfx:p})}if(a==="messageflow-start"){var b=ie("circle",ce({cx:6,cy:6,r:3.5},g({fill:d,stroke:h,strokeWidth:1,strokeDasharray:[1e4,1]})));H(s,{element:b,ref:{x:6,y:6},parentGfx:p})}if(a==="messageflow-end"){var O=ie("path",ce({d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"},g({fill:d,stroke:h,strokeWidth:1,strokeDasharray:[1e4,1]})));H(s,{element:O,ref:{x:8.5,y:5},parentGfx:p})}if(a==="association-start"){var Z=ie("path",ce({d:"M 11 5 L 1 10 L 11 15"},C({fill:"none",stroke:h,strokeWidth:1.5,strokeDasharray:[1e4,1]})));H(s,{element:Z,ref:{x:1,y:10},scale:.5,parentGfx:p})}if(a==="association-end"){var Ae=ie("path",ce({d:"M 1 5 L 11 10 L 1 15"},C({fill:"none",stroke:h,strokeWidth:1.5,strokeDasharray:[1e4,1]})));H(s,{element:Ae,ref:{x:11,y:10},scale:.5,parentGfx:p})}if(a==="conditional-flow-marker"){var xe=ie("path",ce({d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"},g({fill:d,stroke:h})));H(s,{element:xe,ref:{x:-1,y:10},scale:.5,parentGfx:p})}if(a==="conditional-default-flow-marker"){var Te=ie("path",ce({d:"M 6 4 L 10 16"},g({stroke:h,fill:"none"})));H(s,{element:Te,ref:{x:0,y:10},scale:.5,parentGfx:p})}}function j(p,s,a,d,h={}){Ze(d)&&(h=d,d=0),d=d||0,h=g(h);var y=s/2,b=a/2,O=ie("circle",ce({cx:y,cy:b,r:Math.round((s+a)/4-d)},h));return _e(p,O),O}function re(p,s,a,d,h,y){Ze(h)&&(y=h,h=0),h=h||0,y=g(y);var b=ie("rect",ce({x:h,y:h,width:s-h*2,height:a-h*2,rx:d,ry:d},y));return _e(p,b),b}function pe(p,s,a,d){var h=s/2,y=a/2,b=[{x:h,y:0},{x:s,y},{x:h,y:a},{x:0,y}],O=b.map(function(Ae){return Ae.x+","+Ae.y}).join(" ");d=g(d);var Z=ie("polygon",Re(ce({},d),{points:O}));return _e(p,Z),Z}function ee(p,s,a,d){a=C(a);var h=mn(s,a,d);return _e(p,h),h}function w(p,s,a){return ee(p,s,a,5)}function m(p,s,a){a=C(a);var d=ie("path",Re(ce({},a),{d:s}));return _e(p,d),d}function x(p,s,a,d){return m(s,a,P({"data-marker":p},d))}function D(p){return tt[p]}function L(p){return function(s,a,d){return D(p)(s,a,d)}}var v={"bpmn:MessageEventDefinition":function(p,s,a={},d){var h=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:a.width||s.width,containerHeight:a.height||s.height,position:{mx:.235,my:.315}}),y=d?M(s,c,a.stroke):K(s,u,a.fill),b=d?K(s,u,a.fill):M(s,c,a.stroke),O=m(p,h,{fill:y,stroke:b,strokeWidth:1});return O},"bpmn:TimerEventDefinition":function(p,s,a={}){var d=a.width||s.width,h=a.height||s.height,y=a.width?1:2,b=j(p,d,h,.2*h,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:y}),O=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:d,containerHeight:h,position:{mx:.5,my:.5}});m(p,O,{stroke:M(s,c,a.stroke),strokeWidth:y});for(var Z=0;Z<12;Z++){var Ae=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:d,containerHeight:h,position:{mx:.5,my:.5}}),xe=d/2,Te=h/2;m(p,Ae,{strokeWidth:1,stroke:M(s,c,a.stroke),transform:"rotate("+Z*30+","+Te+","+xe+")"})}return b},"bpmn:EscalationEventDefinition":function(p,s,a={},d){var h=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width||s.width,containerHeight:a.height||s.height,position:{mx:.5,my:.2}}),y=d?M(s,c,a.stroke):K(s,u,a.fill);return m(p,h,{fill:y,stroke:M(s,c,a.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(p,s,a={}){var d=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width||s.width,containerHeight:a.height||s.height,position:{mx:.5,my:.222}});return m(p,d,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(p,s,a={},d){var h=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.57,my:.263}}),y=d?M(s,c,a.stroke):K(s,u,a.fill);return m(p,h,{fill:y,stroke:M(s,c,a.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(p,s,a={},d){var h=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:a.width||s.width,containerHeight:a.height||s.height,position:{mx:.2,my:.722}}),y=d?M(s,c,a.stroke):K(s,u,a.fill);return m(p,h,{fill:y,stroke:M(s,c,a.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(p,s,a={},d){var h=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.638,my:-.055}}),y=d?M(s,c,a.stroke):"none",b=m(p,h,{fill:y,stroke:M(s,c,a.stroke),strokeWidth:1});return Go(b,45),b},"bpmn:CompensateEventDefinition":function(p,s,a={},d){var h=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width||s.width,containerHeight:a.height||s.height,position:{mx:.22,my:.5}}),y=d?M(s,c,a.stroke):K(s,u,a.fill);return m(p,h,{fill:y,stroke:M(s,c,a.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(p,s,a={},d){var h=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:a.width||s.width,containerHeight:a.height||s.height,position:{mx:.5,my:.2}}),y=d?M(s,c,a.stroke):K(s,u,a.fill);return m(p,h,{strokeWidth:1,fill:y,stroke:M(s,c,a.stroke)})},"bpmn:MultipleEventDefinition":function(p,s,a={},d){var h=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:a.width||s.width,containerHeight:a.height||s.height,position:{mx:.211,my:.36}}),y=d?M(s,c,a.stroke):K(s,u,a.fill);return m(p,h,{fill:y,stroke:M(s,c,a.stroke),strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(p,s,a={}){var d=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:a.width||s.width,containerHeight:a.height||s.height,position:{mx:.458,my:.194}});return m(p,d,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(p,s,a={}){var d=j(p,s.width,s.height,8,{fill:M(s,c,a.stroke),stroke:M(s,c,a.stroke),strokeWidth:4});return d}};function k(p,s,a={},d){var h=fe(p),y=Vo(h),b=d||p;return h.get("eventDefinitions")&&h.get("eventDefinitions").length>1?h.get("parallelMultiple")?v["bpmn:ParallelMultipleEventDefinition"](s,b,a,y):v["bpmn:MultipleEventDefinition"](s,b,a,y):bt(h,"bpmn:MessageEventDefinition")?v["bpmn:MessageEventDefinition"](s,b,a,y):bt(h,"bpmn:TimerEventDefinition")?v["bpmn:TimerEventDefinition"](s,b,a,y):bt(h,"bpmn:ConditionalEventDefinition")?v["bpmn:ConditionalEventDefinition"](s,b,a,y):bt(h,"bpmn:SignalEventDefinition")?v["bpmn:SignalEventDefinition"](s,b,a,y):bt(h,"bpmn:EscalationEventDefinition")?v["bpmn:EscalationEventDefinition"](s,b,a,y):bt(h,"bpmn:LinkEventDefinition")?v["bpmn:LinkEventDefinition"](s,b,a,y):bt(h,"bpmn:ErrorEventDefinition")?v["bpmn:ErrorEventDefinition"](s,b,a,y):bt(h,"bpmn:CancelEventDefinition")?v["bpmn:CancelEventDefinition"](s,b,a,y):bt(h,"bpmn:CompensateEventDefinition")?v["bpmn:CompensateEventDefinition"](s,b,a,y):bt(h,"bpmn:TerminateEventDefinition")?v["bpmn:TerminateEventDefinition"](s,b,a,y):null}var A={ParticipantMultiplicityMarker:function(p,s,a={}){var d=ot(s,a),h=Ge(s,a),y=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:d,containerHeight:h,position:{mx:(d/2-6)/d,my:(h-15)/h}});x("participant-multiplicity",p,y,{strokeWidth:2,fill:K(s,u,a.fill),stroke:M(s,c,a.stroke)})},SubProcessMarker:function(p,s,a={}){var d=re(p,14,14,0,{strokeWidth:1,fill:K(s,u,a.fill),stroke:M(s,c,a.stroke)});vi(d,s.width/2-7.5,s.height-20);var h=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2-7.5)/s.width,my:(s.height-20)/s.height}});x("sub-process",p,h,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke)})},ParallelMarker:function(p,s,a){var d=ot(s,a),h=Ge(s,a),y=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:d,containerHeight:h,position:{mx:(d/2+a.parallel)/d,my:(h-20)/h}});x("parallel",p,y,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke)})},SequentialMarker:function(p,s,a){var d=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+a.seq)/s.width,my:(s.height-19)/s.height}});x("sequential",p,d,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke)})},CompensationMarker:function(p,s,a){var d=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+a.compensation)/s.width,my:(s.height-13)/s.height}});x("compensation",p,d,{strokeWidth:1,fill:K(s,u,a.fill),stroke:M(s,c,a.stroke)})},LoopMarker:function(p,s,a){var d=ot(s,a),h=Ge(s,a),y=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:d,containerHeight:h,position:{mx:(d/2+a.loop)/d,my:(h-7)/h}});x("loop",p,y,{strokeWidth:1.5,fill:"none",stroke:M(s,c,a.stroke),strokeMiterlimit:.5})},AdhocMarker:function(p,s,a){var d=ot(s,a),h=Ge(s,a),y=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:d,containerHeight:h,position:{mx:(d/2+a.adhoc)/d,my:(h-15)/h}});x("adhoc",p,y,{strokeWidth:1,fill:M(s,c,a.stroke),stroke:M(s,c,a.stroke)})}};function V(p,s,a,d){A[p](s,a,d)}function I(p,s,a=[],d={}){d={fill:d.fill,stroke:d.stroke,width:ot(s,d),height:Ge(s,d)};var h=fe(s),y=a.includes("SubProcessMarker");y?d=Re(ce({},d),{seq:-21,parallel:-22,compensation:-25,loop:-18,adhoc:10}):d=Re(ce({},d),{seq:-5,parallel:-6,compensation:-7,loop:0,adhoc:-8}),h.get("isForCompensation")&&a.push("CompensationMarker"),T(h,"bpmn:AdHocSubProcess")&&(a.push("AdhocMarker"),y||P(d,{compensation:d.compensation-18}));var b=h.get("loopCharacteristics"),O=b&&b.get("isSequential");b&&(P(d,{compensation:d.compensation-18}),a.includes("AdhocMarker")&&P(d,{seq:-23,loop:-18,parallel:-24}),O===void 0&&a.push("LoopMarker"),O===!1&&a.push("ParallelMarker"),O===!0&&a.push("SequentialMarker")),a.includes("CompensationMarker")&&a.length===1&&P(d,{compensation:-8}),R(a,function(Z){V(Z,p,s,d)})}function N(p,s,a={}){a=P({size:{width:100}},a);var d=o.createText(s||"",a);return rt(d).add("djs-label"),_e(p,d),d}function X(p,s,a,d={}){var h=fe(s),y=gn({x:s.x,y:s.y,width:s.width,height:s.height},d);return N(p,h.name,{align:a,box:y,padding:7,style:{fill:yn(s,f,c,d.stroke)}})}function Ct(p,s,a={}){var d={width:90,height:30,x:s.width/2+s.x,y:s.height/2+s.y};return N(p,fn(s),{box:d,fitBox:!0,style:P({},o.getExternalStyle(),{fill:yn(s,f,c,a.stroke)})})}function ye(p,s,a,d={}){var h=cr(a),y=N(p,s,{box:{height:30,width:h?Ge(a,d):ot(a,d)},align:"center-middle",style:{fill:yn(a,f,c,d.stroke)}});if(h){var b=-1*Ge(a,d);gi(y,0,-b,270)}}function J(p,s,a={}){var{width:d,height:h}=gn(s,a);return re(p,d,h,Ei,Re(ce({},a),{fill:K(s,u,a.fill),fillOpacity:_n,stroke:M(s,c,a.stroke)}))}function mt(p,s,a={}){var d=fe(s),h=K(s,u,a.fill),y=M(s,c,a.stroke);return(d.get("associationDirection")==="One"||d.get("associationDirection")==="Both")&&(a.markerEnd=q(p,"association-end",h,y)),d.get("associationDirection")==="Both"&&(a.markerStart=q(p,"association-start",h,y)),a=Q(a,["markerStart","markerEnd"]),w(p,s.waypoints,Re(ce({},a),{stroke:y,strokeDasharray:"0, 5"}))}function yt(p,s,a={}){var d=K(s,u,a.fill),h=M(s,c,a.stroke),y=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}}),b=m(p,y,{fill:d,fillOpacity:_n,stroke:h}),O=fe(s);if(Oo(O)){var Z=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.33,my:(s.height-18)/s.height}});m(p,Z,{strokeWidth:2,fill:d,stroke:h})}return b}function Ce(p,s,a={}){return j(p,s.width,s.height,Re(ce({fillOpacity:_n},a),{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke)}))}function ut(p,s,a={}){return pe(p,s.width,s.height,{fill:K(s,u,a.fill),fillOpacity:_n,stroke:M(s,c,a.stroke)})}function _(p,s,a={}){var d=re(p,ot(s,a),Ge(s,a),0,{fill:K(s,u,a.fill),fillOpacity:a.fillOpacity||_n,stroke:M(s,c,a.stroke),strokeWidth:1.5}),h=fe(s);if(T(h,"bpmn:Lane")){var y=h.get("name");ye(p,y,s,a)}return d}function E(p,s,a={}){var d=J(p,s,a),h=Ot(s);if(bo(s)&&(ne(d,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),!h)){var y=fe(s).flowElements||[],b=y.filter(O=>T(O,"bpmn:StartEvent"));b.length===1&&B(b[0],p,a,s)}return X(p,s,h?"center-top":"center-middle",a),h?I(p,s,void 0,a):I(p,s,["SubProcessMarker"],a),d}function B(p,s,a,d){var h=22,y={fill:K(d,u,a.fill),stroke:M(d,c,a.stroke),width:h,height:h},b=fe(p).isInterrupting,O=b?0:3,Z=b?1:1.2,Ae=20,xe=(h-Ae)/2,Te="translate("+xe+","+xe+")";j(s,Ae,Ae,{fill:y.fill,stroke:y.stroke,strokeWidth:Z,strokeDasharray:O,transform:Te}),k(p,s,y,d)}function ue(p,s,a={}){var d=J(p,s,a);return X(p,s,"center-middle",a),I(p,s,void 0,a),d}var tt=this.handlers={"bpmn:AdHocSubProcess":function(p,s,a={}){return Ot(s)?a=Q(a,["fill","stroke","width","height"]):a=Q(a,["fill","stroke"]),E(p,s,a)},"bpmn:Association":function(p,s,a={}){return a=Q(a,["fill","stroke"]),mt(p,s,a)},"bpmn:BoundaryEvent":function(p,s,a={}){var{renderIcon:d=!0}=a;a=Q(a,["fill","stroke"]);var h=fe(s),y=h.get("cancelActivity");a={strokeWidth:1.5,fill:K(s,u,a.fill),fillOpacity:au,stroke:M(s,c,a.stroke)},y||(a.strokeDasharray="6");var b=Ce(p,s,a);return j(p,s.width,s.height,_i,Re(ce({},a),{fill:"none"})),d&&k(s,p,a),b},"bpmn:BusinessRuleTask":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ue(p,s,a),h=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),y=m(p,h);ne(y,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:1});var b=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),O=m(p,b);return ne(O,{fill:M(s,c,a.stroke),stroke:M(s,c,a.stroke),strokeWidth:1}),d},"bpmn:CallActivity":function(p,s,a={}){return a=Q(a,["fill","stroke"]),E(p,s,ce({strokeWidth:5},a))},"bpmn:ComplexGateway":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ut(p,s,a),h=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.26}});return m(p,h,{fill:M(s,c,a.stroke),stroke:M(s,c,a.stroke),strokeWidth:1}),d},"bpmn:DataInput":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=i.getRawPath("DATA_ARROW"),h=yt(p,s,a);return m(p,d,{fill:"none",stroke:M(s,c,a.stroke),strokeWidth:1}),h},"bpmn:DataInputAssociation":function(p,s,a={}){return a=Q(a,["fill","stroke"]),mt(p,s,Re(ce({},a),{markerEnd:q(p,"association-end",K(s,u,a.fill),M(s,c,a.stroke))}))},"bpmn:DataObject":function(p,s,a={}){return a=Q(a,["fill","stroke"]),yt(p,s,a)},"bpmn:DataObjectReference":L("bpmn:DataObject"),"bpmn:DataOutput":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=i.getRawPath("DATA_ARROW"),h=yt(p,s,a);return m(p,d,{strokeWidth:1,fill:K(s,u,a.fill),stroke:M(s,c,a.stroke)}),h},"bpmn:DataOutputAssociation":function(p,s,a={}){return a=Q(a,["fill","stroke"]),mt(p,s,Re(ce({},a),{markerEnd:q(p,"association-end",K(s,u,a.fill),M(s,c,a.stroke))}))},"bpmn:DataStoreReference":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:.133}});return m(p,d,{fill:K(s,u,a.fill),fillOpacity:_n,stroke:M(s,c,a.stroke),strokeWidth:2})},"bpmn:EndEvent":function(p,s,a={}){var{renderIcon:d=!0}=a;a=Q(a,["fill","stroke"]);var h=Ce(p,s,Re(ce({},a),{strokeWidth:4}));return d&&k(s,p,a),h},"bpmn:EventBasedGateway":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=fe(s),h=ut(p,s,a);j(p,s.width,s.height,s.height*.2,{fill:K(s,"none",a.fill),stroke:M(s,c,a.stroke),strokeWidth:1});var y=d.get("eventGatewayType"),b=!!d.get("instantiate");function O(){var Ae=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:s.width,containerHeight:s.height,position:{mx:.36,my:.44}});m(p,Ae,{fill:"none",stroke:M(s,c,a.stroke),strokeWidth:2})}if(y==="Parallel"){var Z=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}});m(p,Z,{fill:"none",stroke:M(s,c,a.stroke),strokeWidth:1})}else y==="Exclusive"&&(b||j(p,s.width,s.height,s.height*.26,{fill:"none",stroke:M(s,c,a.stroke),strokeWidth:1}),O());return h},"bpmn:ExclusiveGateway":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ut(p,s,a),h=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.32,my:.3}}),y=dt(s);return y.get("isMarkerVisible")&&m(p,h,{fill:M(s,c,a.stroke),stroke:M(s,c,a.stroke),strokeWidth:1}),d},"bpmn:Gateway":function(p,s,a={}){return a=Q(a,["fill","stroke"]),ut(p,s,a)},"bpmn:Group":function(p,s,a={}){return a=Q(a,["fill","stroke","width","height"]),re(p,s.width,s.height,Ei,{stroke:M(s,c,a.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:ot(s,a),height:Ge(s,a)})},"bpmn:InclusiveGateway":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ut(p,s,a);return j(p,s.width,s.height,s.height*.24,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:2.5}),d},"bpmn:IntermediateEvent":function(p,s,a={}){var{renderIcon:d=!0}=a;a=Q(a,["fill","stroke"]);var h=Ce(p,s,Re(ce({},a),{strokeWidth:1.5}));return j(p,s.width,s.height,_i,{fill:"none",stroke:M(s,c,a.stroke),strokeWidth:1.5}),d&&k(s,p,a),h},"bpmn:IntermediateCatchEvent":L("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":L("bpmn:IntermediateEvent"),"bpmn:Lane":function(p,s,a={}){return a=Q(a,["fill","stroke","width","height"]),_(p,s,Re(ce({},a),{fillOpacity:su}))},"bpmn:ManualTask":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ue(p,s,a),h=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return m(p,h,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:.5}),d},"bpmn:MessageFlow":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=fe(s),h=dt(s),y=K(s,u,a.fill),b=M(s,c,a.stroke),O=w(p,s.waypoints,{markerEnd:q(p,"messageflow-end",y,b),markerStart:q(p,"messageflow-start",y,b),stroke:b,strokeDasharray:"10, 11",strokeWidth:1.5});if(d.get("messageRef")){var Z=O.getPointAtLength(O.getTotalLength()/2),Ae=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Z.x,y:Z.y}}),xe={strokeWidth:1};h.get("messageVisibleKind")==="initiating"?(xe.fill=y,xe.stroke=b):(xe.fill=b,xe.stroke=y);var Te=m(p,Ae,xe),ct=d.get("messageRef"),de=ct.get("name"),Nt=N(p,de,{align:"center-top",fitBox:!0,style:{fill:b}}),zn=Te.getBBox(),nt=Nt.getBBox(),U=Z.x-nt.width/2,oe=Z.y+zn.height/2+ru;gi(Nt,U,oe,0)}return O},"bpmn:ParallelGateway":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ut(p,s,a),h=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.2}});return m(p,h,{fill:M(s,c,a.stroke),stroke:M(s,c,a.stroke),strokeWidth:1}),d},"bpmn:Participant":function(p,s,a={}){a=Q(a,["fill","stroke","width","height"]);var d=_(p,s,a),h=Ot(s),y=cr(s),b=fe(s),O=b.get("name");if(h){var Z=y?[{x:30,y:0},{x:30,y:Ge(s,a)}]:[{x:0,y:30},{x:ot(s,a),y:30}];ee(p,Z,{stroke:M(s,c,a.stroke),strokeWidth:ou}),ye(p,O,s,a)}else{var Ae=gn(s,a);y||(Ae.height=ot(s,a),Ae.width=Ge(s,a));var xe=N(p,O,{box:Ae,align:"center-middle",style:{fill:yn(s,f,c,a.stroke)}});if(!y){var Te=-1*Ge(s,a);gi(xe,0,-Te,270)}}return b.get("participantMultiplicity")&&V("ParticipantMultiplicityMarker",p,s,a),d},"bpmn:ReceiveTask":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=fe(s),h=ue(p,s,a),y;return d.get("instantiate")?(j(p,28,28,20*.22,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:1}),y=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):y=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),m(p,y,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:1}),h},"bpmn:ScriptTask":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ue(p,s,a),h=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return m(p,h,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:1}),d},"bpmn:SendTask":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ue(p,s,a),h=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return m(p,h,{fill:M(s,c,a.stroke),stroke:K(s,u,a.fill),strokeWidth:1}),d},"bpmn:SequenceFlow":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=K(s,u,a.fill),h=M(s,c,a.stroke),y=w(p,s.waypoints,{markerEnd:q(p,"sequenceflow-end",d,h),stroke:h}),b=fe(s),{source:O}=s;if(O){var Z=fe(O);b.get("conditionExpression")&&T(Z,"bpmn:Activity")&&ne(y,{markerStart:q(p,"conditional-flow-marker",d,h)}),Z.get("default")&&(T(Z,"bpmn:Gateway")||T(Z,"bpmn:Activity"))&&Z.get("default")===b&&ne(y,{markerStart:q(p,"conditional-default-flow-marker",d,h)})}return y},"bpmn:ServiceTask":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ue(p,s,a);j(p,10,10,{fill:K(s,u,a.fill),stroke:"none",transform:"translate(6, 6)"});var h=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});m(p,h,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:1}),j(p,10,10,{fill:K(s,u,a.fill),stroke:"none",transform:"translate(11, 10)"});var y=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return m(p,y,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:1}),d},"bpmn:StartEvent":function(p,s,a={}){var{renderIcon:d=!0}=a;a=Q(a,["fill","stroke"]);var h=fe(s);h.get("isInterrupting")||(a=Re(ce({},a),{strokeDasharray:"6"}));var y=Ce(p,s,a);return d&&k(s,p,a),y},"bpmn:SubProcess":function(p,s,a={}){return Ot(s)?a=Q(a,["fill","stroke","width","height"]):a=Q(a,["fill","stroke"]),E(p,s,a)},"bpmn:Task":function(p,s,a={}){return a=Q(a,["fill","stroke"]),ue(p,s,a)},"bpmn:TextAnnotation":function(p,s,a={}){a=Q(a,["fill","stroke","width","height"]);var{width:d,height:h}=gn(s,a),y=re(p,d,h,0,0,{fill:"none",stroke:"none"}),b=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:d,containerHeight:h,position:{mx:0,my:0}});m(p,b,{stroke:M(s,c,a.stroke)});var O=fe(s),Z=O.get("text")||"";return N(p,Z,{align:"left-top",box:gn(s,a),padding:7,style:{fill:yn(s,f,c,a.stroke)}}),y},"bpmn:Transaction":function(p,s,a={}){Ot(s)?a=Q(a,["fill","stroke","width","height"]):a=Q(a,["fill","stroke"]);var d=E(p,s,ce({strokeWidth:1.5},a)),h=n.style(["no-fill","no-events"],{stroke:M(s,c,a.stroke),strokeWidth:1.5}),y=Ot(s);return y||(a={}),re(p,ot(s,a),Ge(s,a),Ei-_i,_i,h),d},"bpmn:UserTask":function(p,s,a={}){a=Q(a,["fill","stroke"]);var d=ue(p,s,a),h=15,y=12,b=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:h,y}});m(p,b,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:.5});var O=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:h,y}});m(p,O,{fill:K(s,u,a.fill),stroke:M(s,c,a.stroke),strokeWidth:.5});var Z=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:h,y}});return m(p,Z,{fill:M(s,c,a.stroke),stroke:M(s,c,a.stroke),strokeWidth:.5}),d},label:function(p,s,a={}){return Ct(p,s,a)}};this._drawPath=m,this._renderer=D}Ne(Ht,pt);Ht.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Ht.prototype.canRender=function(e){return T(e,"bpmn:BaseElement")};Ht.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Ht.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Ht.prototype.getShapePath=function(e){return T(e,"bpmn:Event")?Bo(e):T(e,"bpmn:Activity")?Fo(e,Ei):T(e,"bpmn:Gateway")?Lo(e):jo(e)};function Q(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var lu=0,uu={width:150,height:50};function cu(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function pu(e){return Ze(e)?P({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function du(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch(o){return console.log(o),{width:0,height:0}}}function fu(e,t,n){for(var i=e.shift(),r=i,o;;){if(o=du(r,n),o.width=r?o.width:0,r===" "||r===""||o.width<Math.round(t)||r.length<2)return hu(e,r,i,o);r=yu(r,o.width,t)}}function hu(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var qo="\xAD";function mu(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],o=0;if(n.length>1)for(;i=n.shift();)if(i.length+o<t)r.push(i),o+=i.length;else{(i==="-"||i===qo)&&r.pop();break}var l=r[r.length-1];return l&&l===qo&&(r[r.length-1]="-"),r.join("")}function yu(e,t,n){var i=Math.max(e.length*(n/t),1),r=mu(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function gu(){var e=document.getElementById("helper-svg");return e||(e=ie("svg"),ne(e,{id:"helper-svg"}),Ve(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function En(e){this._config=P({},{size:uu,padding:lu,style:{},align:"center-top"},e||{})}En.prototype.createText=function(e,t){return this.layoutText(e,t).element};En.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};En.prototype.layoutText=function(e,t){var n=P({},this._config.size,t.box),i=P({},this._config.style,t.style),r=cu(t.align||this._config.align),o=pu(t.padding!==void 0?t.padding:this._config.padding),l=t.fitBox||!1,u=vu(i),c=e.split(/\u00AD?\r?\n/),f=[],g=n.width-o.left-o.right,C=ie("text");ne(C,{x:0,y:0}),ne(C,i);var H=gu();for(_e(H,C);c.length;)f.push(fu(c,g,C));r.vertical==="middle"&&(o.top=o.bottom=0);var q=Dt(f,function(ee,w,m){return ee+(u||w.height)},0)+o.top+o.bottom,me=Dt(f,function(ee,w,m){return w.width>ee?w.width:ee},0),j=o.top;r.vertical==="middle"&&(j+=(n.height-q)/2),j-=(u||f[0].height)/4;var re=ie("text");ne(re,i),R(f,function(ee){var w;switch(j+=u||ee.height,r.horizontal){case"left":w=o.left;break;case"right":w=(l?me:g)-o.right-ee.width;break;default:w=Math.max(((l?me:g)-ee.width)/2+o.left,0)}var m=ie("tspan");ne(m,{x:w,y:j}),m.textContent=ee.text,_e(re,m)}),Bt(C);var pe={width:me,height:q};return{dimensions:pe,element:re}};function vu(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var _u=12,Eu=1.2,bu=30;function bi(e){var t=P({fontFamily:"Arial, sans-serif",fontSize:_u,fontWeight:"normal",lineHeight:Eu},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=P({},t,{fontSize:n},e&&e.externalStyle||{}),r=new En({style:t});this.getExternalLabelBounds=function(o,l){var u=r.getDimensions(l,{box:{width:90,height:30},style:i});return{x:Math.round(o.x+o.width/2-u.width/2),y:Math.round(o.y),width:Math.ceil(u.width),height:Math.ceil(u.height)}},this.getTextAnnotationBounds=function(o,l){var u=r.getDimensions(l,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(bu,Math.round(u.height))}},this.createText=function(o,l){return r.createText(o,l||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}bi.$inject=["config.textRenderer"];function Cr(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,o;n.abspos?(r=n.abspos.x,o=n.abspos.y):(r=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var l={};if(n.position){for(var u=n.containerHeight/i.height*n.yScaleFactor,c=n.containerWidth/i.width*n.xScaleFactor,f=0;f<i.heightElements.length;f++)l["y"+f]=i.heightElements[f]*u;for(var g=0;g<i.widthElements.length;g++)l["x"+g]=i.widthElements[g]*c}var C=Au(i.d,{mx:r,my:o,e:l});return C}}var xu=/\{([^{}]+)\}/g,Cu=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function wu(e,t,n){var i=n;return t.replace(Cu,function(r,o,l,u,c){o=o||u,i&&(o in i&&(i=i[o]),typeof i=="function"&&c&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function Au(e,t){return String(e).replace(xu,function(n,i){return wu(n,i,t)})}var Yo={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ht],textRenderer:["type",bi],pathMap:["type",Cr]};function wr(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}var xi={translate:["value",wr]};var Tn=Math,im=Tn.PI,rm=Tn.min,om=Tn.max,am=Tn.pow,sm=Tn.abs;var lm=Array.isArray||function(e){return e instanceof Array};function Su(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Nn(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Xo(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function Du(e){return Su({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function Mu(e){for(var t=e.waypoints,n=t.reduce(function(f,g,C){var H=t[C-1];if(H){var q=f[f.length-1],me=q&&q.endLength||0,j=Ru(H,g);f.push({start:H,end:g,startLength:me,endLength:me+j,length:j})}return f},[]),i=n.reduce(function(f,g){return f+g.length},0),r=i/2,o=0,l=n[o];l.endLength<r;)l=n[++o];var u=(r-l.startLength)/l.length,c={x:l.start.x+(l.end.x-l.start.x)*u,y:l.start.y+(l.end.y-l.start.y)*u};return c}function Ci(e){return xo(e)?Mu(e):Du(e)}function Ru(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Oe(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function wi(e,t,n){return P({id:e.id,type:e.$type,businessObject:e,di:t},n)}function Pu(e,t,n){var i=e.waypoint;return!i||i.length<2?[Ci(t),Ci(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function Zo(e,t,n){return new Error(`element ${Oe(t)} referenced by ${Oe(e)}#${n} not yet drawn`)}function xt(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}xt.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];xt.prototype.add=function(e,t,n){var i,r,o;if(T(t,"bpmndi:BPMNPlane")){var l=T(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(wi(e,t,l)),this._canvas.addRootElement(i)}else if(T(t,"bpmndi:BPMNShape")){var u=!Ot(e,t),c=Iu(e);r=n&&(n.hidden||n.collapsed);var f=t.bounds;i=this._elementFactory.createShape(wi(e,t,{collapsed:u,hidden:r,x:Math.round(f.x),y:Math.round(f.y),width:Math.round(f.width),height:Math.round(f.height),isFrame:c})),T(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),T(e,"bpmn:Lane")&&(o=0),T(e,"bpmn:DataStoreReference")&&(ku(n,Ci(f))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else if(T(t,"bpmndi:BPMNEdge")){var g=this._getSource(e),C=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(wi(e,t,{hidden:r,source:g,target:C,waypoints:Pu(t,g,C)})),T(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}else throw new Error(`unknown di ${Oe(t)} for element ${Oe(e)}`);return wo(e)&&fn(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};xt.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${Oe(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw Zo(e,n,"attachedToRef");t.host=i,r||(i.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)};xt.prototype.addLabel=function(e,t,n){var i,r,o;return i=Ao(t,n),r=fn(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),o=this._elementFactory.createLabel(wi(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!fn(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(o,n.parent)};xt.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?Zo(e,i,t+"Ref"):new Error(`${Oe(e)}#${t} Ref not specified`)};xt.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};xt.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};xt.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function ku(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Iu(e){return T(e,"bpmn:Group")}var Qo={__depends__:[xi],bpmnImporter:["type",xt]};var Jo={__depends__:[Yo,Qo]};function rn(e,t){t=!!t,ke(e)||(e=[e]);var n,i,r,o;return R(e,function(l){var u=l;l.waypoints&&!t&&(u=rn(l.waypoints,!0));var c=u.x,f=u.y,g=u.height||0,C=u.width||0;(c<n||n===void 0)&&(n=c),(f<i||i===void 0)&&(i=f),(c+C>r||r===void 0)&&(r=c+C),(f+g>o||o===void 0)&&(o=f+g)}),{x:n,y:i,height:o-i,width:r-n}}function Ai(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Si(e){return!!(e&&e.isFrame)}function Di(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Di.prototype.next=function(){return this._prefix+ ++this._counter};var Tu=new Di("ov"),Nu=500;function Me(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=Tu,this._overlayDefaults=P({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=Vu(n.getContainer()),this._init()}Me.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Me.prototype.get=function(e){if(Je(e)&&(e={id:e}),Je(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?St(t.overlays,lr({type:e.type})):t.overlays.slice():[]}else return e.type?St(this._overlays,lr({type:e.type})):e.id?this._overlays[e.id]:null};Me.prototype.add=function(e,t,n){if(Ze(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=P({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Me.prototype.remove=function(e){var t=this.get(e)||[];ke(t)||(t=[t]);var n=this;R(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(vn(i.html),vn(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})};Me.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Me.prototype.show=function(){Mi(this._overlayRoot)};Me.prototype.hide=function(){Mi(this._overlayRoot,!1)};Me.prototype.clear=function(){this._overlays={},this._overlayContainers=[],yi(this._overlayRoot)};Me.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=rn(t);i=o.x,r=o.y}ea(n,i,r),mi(e.html,"data-container-id",t.id)};Me.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,o=t.top;if(t.right!==void 0){var l;i.waypoints?l=rn(i).width:l=i.width,r=t.right*-1+l}if(t.bottom!==void 0){var u;i.waypoints?u=rn(i).height:u=i.height,o=t.bottom*-1+u}ea(n,r||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Me.prototype._createOverlayContainer=function(e){var t=Ke('<div class="djs-overlays" />');Ve(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Me.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";ta(this._overlayRoot,n)};Me.prototype._getOverlayContainer=function(e,t){var n=Ie(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Me.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,o;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),Je(i)&&(i=Ke(i)),o=this._getOverlayContainer(n),r=Ke('<div class="djs-overlay" data-overlay-id="'+t+'">'),Ve(r,{position:"absolute"}),r.appendChild(i),e.type&&Lt(r).add("djs-overlay-"+e.type);var l=this._canvas.findRoot(n),u=this._canvas.getRootElement();Mi(r,l===u),e.htmlContainer=r,o.overlays.push(e),o.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Me.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,o=n&&n.maxZoom,l=e.htmlContainer,u=this._canvas.getRootElement(),c=!0;(i!==u||n&&(tn(r)&&r>t.scale||tn(o)&&o<t.scale))&&(c=!1),Mi(l,c),this._updateOverlayScale(e,t)};Me.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,o=e.htmlContainer,l,u="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),tn(i)&&t.scale<i&&(l=(1/t.scale||1)*i),tn(r)&&t.scale>r&&(l=(1/t.scale||1)*r)),tn(l)&&(u="scale("+l+","+l+")"),ta(o,u)};Me.prototype._updateOverlaysVisibilty=function(e){var t=this;R(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Me.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,o=t.get({element:r});R(o,function(c){t.remove(c.id)});var l=t._getOverlayContainer(r);if(l){vn(l.html);var u=t._overlayContainers.indexOf(l);u!==-1&&t._overlayContainers.splice(u,1)}}),e.on("element.changed",Nu,function(i){var r=i.element,o=t._getOverlayContainer(r,!0);o&&(R(o.overlays,function(l){t._updateOverlay(l)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&Lt(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function Vu(e){var t=Ke('<div class="djs-overlay-container" />');return Ve(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function ea(e,t,n){Ve(e,{left:t+"px",top:n+"px"})}function Mi(e,t){e.style.display=t===!1?"none":""}function ta(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}var Ri={__init__:["overlays"],overlays:["type",Me]};function Pi(e,t,n,i){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&e.fire(Ai(o)+".changed",r)}),e.on("elements.changed",function(r){var o=r.elements;o.forEach(function(l){e.fire("element.changed",{element:l})}),i.updateContainments(o)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}Pi.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var na={__init__:["changeSupport"],changeSupport:["type",Pi]};var Ou=1e3;function Fe(e){this._eventBus=e}Fe.$inject=["eventBus"];function Bu(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}Fe.prototype.on=function(e,t,n,i,r,o){if((Et(t)||Qe(t))&&(o=r,r=i,i=n,n=t,t=null),Et(n)&&(o=r,r=i,i=n,n=Ou),Ze(r)&&(o=r,r=!1),!Et(i))throw new Error("handlerFn must be a function");ke(e)||(e=[e]);var l=this._eventBus;R(e,function(u){var c=["commandStack",u,t].filter(function(f){return f}).join(".");l.on(c,n,r?Bu(i,o):i,o)})};Fe.prototype.canExecute=$t("canExecute");Fe.prototype.preExecute=$t("preExecute");Fe.prototype.preExecuted=$t("preExecuted");Fe.prototype.execute=$t("execute");Fe.prototype.executed=$t("executed");Fe.prototype.postExecute=$t("postExecute");Fe.prototype.postExecuted=$t("postExecuted");Fe.prototype.revert=$t("revert");Fe.prototype.reverted=$t("reverted");function $t(e){return function(n,i,r,o,l){(Et(n)||Qe(n))&&(l=o,o=r,r=i,i=n,n=null),this.on(n,e,i,r,o,l)}}function Vn(e,t){t.invoke(Fe,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}Ne(Vn,Fe);Vn.$inject=["canvas","injector"];var ia={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Vn]};var Fu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ra(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return Fu[t]})}var Lu="_plane";function On(e){var t=e.id;return T(e,"bpmn:SubProcess")?ju(t):t}function ju(e){return e+Lu}var Hu="bjs-breadcrumbs-shown";function ki(e,t,n){var i=Ke('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),o=Lt(r);r.appendChild(i);var l=[];e.on("element.changed",function(c){var f=c.element,g=fe(f),C=Ie(l,function(H){return H===g});C&&u()});function u(c){c&&(l=$u(c));var f=l.flatMap(function(C){var H=n.findRoot(On(C))||n.findRoot(C.id);if(!H&&T(C,"bpmn:Process")){var q=t.find(function(re){var pe=fe(re);return pe&&pe.get("processRef")===C});H=q&&n.findRoot(q.id)}if(!H)return[];var me=ra(C.name||C.id),j=Ke('<li><span class="bjs-crumb"><a title="'+me+'">'+me+"</a></span></li>");return j.addEventListener("click",function(){n.setRootElement(H)}),j});i.innerHTML="";var g=f.length>1;o.toggle(Hu,g),f.forEach(function(C){i.appendChild(C)})}e.on("root.set",function(c){u(c.element)})}ki.$inject=["eventBus","elementRegistry","canvas"];function $u(e){for(var t=fe(e),n=[],i=t;i;i=i.$parent)(T(i,"bpmn:SubProcess")||T(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function Ii(e,t){var n=null,i=new Wu;e.on("root.set",function(r){var o=r.element,l=t.viewbox(),u=i.get(o);if(i.set(n,{x:l.x,y:l.y,zoom:l.scale}),n=o,!(!T(o,"bpmn:SubProcess")&&!u)){u=u||{x:0,y:0,zoom:1};var c=(l.x-u.x)*l.scale,f=(l.y-u.y)*l.scale;(c!==0||f!==0)&&t.scroll({dx:c,dy:f}),u.zoom!==l.scale&&t.zoom(u.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}Ii.$inject=["eventBus","canvas"];function Wu(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var oa={x:180,y:160};function Wt(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}Wt.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};Wt.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(o){var l=o.bpmnElement;if(l){var u=l.$parent;T(l,"bpmn:SubProcess")&&!o.isExpanded&&n.push(l),zu(l,e)&&i.push({diElement:o,parent:u})}});var r=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var l=t._createDiagram(o);t._processToDiagramMap[o.id]=l,r.push(l)}}),i.forEach(function(o){for(var l=o.diElement,u=o.parent;u&&n.indexOf(u)===-1;)u=u.$parent;if(u){var c=t._processToDiagramMap[u.id];t._moveToDiPlane(l,c.plane)}}),r};Wt.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=Uu(e),i={x:n.x-oa.x,y:n.y-oa.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(o){o.x=o.x-i.x,o.y=o.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};Wt.prototype._moveToDiPlane=function(e,t){var n=aa(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Wt.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Wt.$inject=["eventBus","moddle"];function aa(e){return T(e,"bpmndi:BPMNDiagram")?e:aa(e.$parent)}function Uu(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=Nn(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),Xo(t)}function zu(e,t){var n=e.$parent;return!(!T(n,"bpmn:SubProcess")||n===t.bpmnElement||Eo(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Ti=250,Gu='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',Ku="bjs-drilldown-empty";function Mt(e,t,n,i,r){Fe.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var o=this;this.executed("shape.toggleCollapse",Ti,function(l){var u=l.shape;o._canDrillDown(u)?o._addOverlay(u):o._removeOverlay(u)},!0),this.reverted("shape.toggleCollapse",Ti,function(l){var u=l.shape;o._canDrillDown(u)?o._addOverlay(u):o._removeOverlay(u)},!0),this.executed(["shape.create","shape.move","shape.delete"],Ti,function(l){var u=l.oldParent,c=l.newParent||l.parent,f=l.shape;o._canDrillDown(f)&&o._addOverlay(f),o._updateDrilldownOverlay(u),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(f)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Ti,function(l){var u=l.oldParent,c=l.newParent||l.parent,f=l.shape;o._canDrillDown(f)&&o._addOverlay(f),o._updateDrilldownOverlay(u),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(f)},!0),t.on("import.render.complete",function(){n.filter(function(l){return o._canDrillDown(l)}).map(function(l){o._addOverlay(l)})})}Ne(Mt,Fe);Mt.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};Mt.prototype._canDrillDown=function(e){var t=this._canvas;return T(e,"bpmn:SubProcess")&&t.findRoot(On(e))};Mt.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=fe(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;Lt(i.html).toggle(Ku,!r)}};Mt.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=fe(e),r=n.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var o=Ke('<button type="button" class="bjs-drilldown">'+Gu+"</button>"),l=i.get("name")||i.get("id"),u=this._translate("Open {element}",{element:l});o.setAttribute("title",u),o.addEventListener("click",function(){t.setRootElement(t.findRoot(On(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};Mt.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};Mt.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];var sa={__depends__:[Ri,na,ia],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",ki],drilldownCentering:["type",Ii],drilldownOverlayBehavior:["type",Mt],subprocessCompatibility:["type",Wt]};function Ar(e){return e.originalEvent||e.srcEvent}function Sr(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function la(){return/mac/i.test(navigator.platform)}function ua(e,t){return(Ar(e)||e).button===t}function bn(e){return ua(e,0)}function ca(e){return ua(e,1)}function pa(e){var t=Ar(e)||e;return bn(e)&&t.shiftKey}function qu(e){return!0}function Ni(e){return bn(e)||ca(e)}var da=500;function Vi(e,t,n){var i=this;function r(v,k,A){if(!u(v,k)){var V,I,N;A?I=t.getGraphics(A):(V=k.delegateTarget||k.target,V&&(I=V,A=t.get(I))),!(!I||!A)&&(N=e.fire(v,{element:A,gfx:I,originalEvent:k}),N===!1&&(k.stopPropagation(),k.preventDefault()))}}var o={};function l(v){return o[v]}function u(v,k){var A=f[v]||bn;return!A(k)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},f={"element.contextmenu":qu,"element.mousedown":Ni,"element.mouseup":Ni,"element.click":Ni,"element.dblclick":Ni};function g(v,k,A){var V=c[v];if(!V)throw new Error("unmapped DOM event name <"+v+">");return r(V,k,A)}var C="svg, .djs-element";function H(v,k,A,V){var I=o[A]=function(N){r(A,N)};V&&(f[A]=V),I.$delegate=In.bind(v,C,k,I)}function q(v,k,A){var V=l(A);V&&In.unbind(v,k,V.$delegate)}function me(v){R(c,function(k,A){H(v,A,k)})}function j(v){R(c,function(k,A){q(v,A,k)})}e.on("canvas.destroy",function(v){j(v.svg)}),e.on("canvas.init",function(v){me(v.svg)}),e.on(["shape.added","connection.added"],function(v){var k=v.element,A=v.gfx;e.fire("interactionEvents.createHit",{element:k,gfx:A})}),e.on(["shape.changed","connection.changed"],da,function(v){var k=v.element,A=v.gfx;e.fire("interactionEvents.updateHit",{element:k,gfx:A})}),e.on("interactionEvents.createHit",da,function(v){var k=v.element,A=v.gfx;i.createDefaultHit(k,A)}),e.on("interactionEvents.updateHit",function(v){var k=v.element,A=v.gfx;i.updateDefaultHit(k,A)});var re=x("djs-hit djs-hit-stroke"),pe=x("djs-hit djs-hit-click-stroke"),ee=x("djs-hit djs-hit-all"),w=x("djs-hit djs-hit-no-move"),m={all:ee,"click-stroke":pe,stroke:re,"no-move":w};function x(v,k){return k=P({stroke:"white",strokeWidth:15},k||{}),n.cls(v,["no-fill","no-border"],k)}function D(v,k){var A=m[k];if(!A)throw new Error("invalid hit type <"+k+">");return ne(v,A),v}function L(v,k){_e(v,k)}this.removeHits=function(v){var k=zo(".djs-hit",v);R(k,Bt)},this.createDefaultHit=function(v,k){var A=v.waypoints,V=v.isFrame,I;return A?this.createWaypointsHit(k,A):(I=V?"stroke":"all",this.createBoxHit(k,I,{width:v.width,height:v.height}))},this.createWaypointsHit=function(v,k){var A=mn(k);return D(A,"stroke"),L(v,A),A},this.createBoxHit=function(v,k,A){A=P({x:0,y:0},A);var V=ie("rect");return D(V,k),ne(V,A),L(v,V),V},this.updateDefaultHit=function(v,k){var A=at(".djs-hit",k);if(A)return v.waypoints?_r(A,v.waypoints):ne(A,{width:v.width,height:v.height}),A},this.fire=r,this.triggerMouseEvent=g,this.mouseHandler=l,this.registerEvent=H,this.unregisterEvent=q}Vi.$inject=["eventBus","elementRegistry","styles"];var fa={__init__:["interactionEvents"],interactionEvents:["type",Vi]};function Xt(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}Xt.$inject=["eventBus","canvas"];Xt.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};Xt.prototype.get=function(){return this._selectedElements};Xt.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Xt.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();ke(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(l){var u=r.findRoot(l);return o===u}),t?R(e,function(l){n.indexOf(l)===-1&&n.push(l)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var ha="hover",ma="selected";function Oi(e,t){this._canvas=e;function n(r,o){e.addMarker(r,o)}function i(r,o){e.removeMarker(r,o)}t.on("element.hover",function(r){n(r.element,ha)}),t.on("element.out",function(r){i(r.element,ha)}),t.on("selection.changed",function(r){function o(f){i(f,ma)}function l(f){n(f,ma)}var u=r.oldSelection,c=r.newSelection;R(u,function(f){c.indexOf(f)===-1&&o(f)}),R(c,function(f){u.indexOf(f)===-1&&l(f)})})}Oi.$inject=["canvas","eventBus"];function Bi(e,t,n,i){e.on("create.end",500,function(r){var o=r.context,l=o.canExecute,u=o.elements,c=o.hints||{},f=c.autoSelect;if(l){if(f===!1)return;ke(f)?t.select(f):t.select(u.filter(Yu))}}),e.on("connect.end",500,function(r){var o=r.context,l=o.connection;l&&t.select(l)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],l=i.get(r.context.shape.id),u=Ie(o,function(c){return l.id===c.id});u||t.select(l)}),e.on("element.click",function(r){if(bn(r)){var o=r.element;o===n.getRootElement()&&(o=null);var l=t.isSelected(o),u=t.get().length>1,c=pa(r);if(l&&u)return c?t.deselect(o):t.select(o);l?t.deselect(o):t.select(o,c)}})}Bi.$inject=["eventBus","selection","canvas","elementRegistry"];function Yu(e){return!e.hidden}var ya={__init__:["selectionVisuals","selectionBehavior"],__depends__:[fa],selection:["type",Xt],selectionVisuals:["type",Oi],selectionBehavior:["type",Bi]};var Xu=/^class[ {]/;function Zu(e){return Xu.test(e.toString())}function Mr(e){return Array.isArray(e)}function Dr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fi(...e){e.length===1&&Mr(e[0])&&(e=e[0]),e=[...e];let t=e.pop();return t.$inject=e,t}var Qu=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Ju=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,ec=/\/\*([^*]*)\*\//m;function tc(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);let t=e.toString().match(Zu(e)?Qu:Ju);if(!t)return[];let n=t[1]||t[2];return n&&n.split(",").map(i=>{let r=i.match(ec);return(r&&r[1]||i).trim()})||[]}function Rr(e,t){let n=t||{get:function(w,m){if(i.push(w),m===!1)return null;throw u(`No provider for "${w}"!`)}},i=[],r=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),l=o.injector=this,u=function(w){let m=i.join(" -> ");return i.length=0,new Error(m?`${w} (Resolving: ${m})`:w)};function c(w,m){if(!r[w]&&w.includes(".")){let x=w.split("."),D=c(x.shift());for(;x.length;)D=D[x.shift()];return D}if(Dr(o,w))return o[w];if(Dr(r,w)){if(i.indexOf(w)!==-1)throw i.push(w),u("Cannot resolve circular dependency!");return i.push(w),o[w]=r[w][0](r[w][1]),i.pop(),o[w]}return n.get(w,m)}function f(w,m){if(typeof m>"u"&&(m={}),typeof w!="function")if(Mr(w))w=Fi(w.slice());else throw u(`Cannot invoke "${w}". Expected a function!`);let D=(w.$inject||tc(w)).map(L=>Dr(m,L)?m[L]:c(L));return{fn:w,dependencies:D}}function g(w){let{fn:m,dependencies:x}=f(w),D=Function.prototype.bind.call(m,null,...x);return new D}function C(w,m,x){let{fn:D,dependencies:L}=f(w,x);return D.apply(m,L)}function H(w){return Fi(m=>w.get(m))}function q(w,m){if(m&&m.length){let x=Object.create(null),D=Object.create(null),L=[],v=[],k=[],A,V,I,N;for(let X in r)A=r[X],m.indexOf(X)!==-1&&(A[2]==="private"?(V=L.indexOf(A[3]),V===-1?(I=A[3].createChild([],m),N=H(I),L.push(A[3]),v.push(I),k.push(N),x[X]=[N,X,"private",I]):x[X]=[k[V],X,"private",v[V]]):x[X]=[A[2],A[1]],D[X]=!0),(A[2]==="factory"||A[2]==="type")&&A[1].$scope&&m.forEach(Ct=>{A[1].$scope.indexOf(Ct)!==-1&&(x[X]=[A[2],A[1]],D[Ct]=!0)});m.forEach(X=>{if(!D[X])throw new Error('No provider for "'+X+'". Cannot use provider from the parent!')}),w.unshift(x)}return new Rr(w,l)}let me={factory:C,type:g,value:function(w){return w}};function j(w,m){let x=w.__init__||[];return function(){x.forEach(D=>{typeof D=="string"?m.get(D):m.invoke(D)})}}function re(w){let m=w.__exports__;if(m){let x=w.__modules__,D=Object.keys(w).reduce((V,I)=>(I!=="__exports__"&&I!=="__modules__"&&I!=="__init__"&&I!=="__depends__"&&(V[I]=w[I]),V),Object.create(null)),L=(x||[]).concat(D),v=q(L),k=Fi(function(V){return v.get(V)});m.forEach(function(V){r[V]=[k,V,"private",v]});let A=(w.__init__||[]).slice();return A.unshift(function(){v.init()}),w=Object.assign({},w,{__init__:A}),j(w,v)}return Object.keys(w).forEach(function(x){if(x==="__init__"||x==="__depends__")return;let D=w[x];if(D[2]==="private"){r[x]=D;return}let L=D[0],v=D[1];r[x]=[me[L],nc(L,v),L]}),j(w,l)}function pe(w,m){return w.indexOf(m)!==-1||(w=(m.__depends__||[]).reduce(pe,w),w.indexOf(m)!==-1)?w:w.concat(m)}function ee(w){let m=w.reduce(pe,[]).map(re),x=!1;return function(){x||(x=!0,m.forEach(D=>D()))}}this.get=c,this.invoke=C,this.instantiate=g,this.createChild=q,this.init=ee(e)}function nc(e,t){return e!=="value"&&Mr(t)&&(t=Fi(t.slice())),t}var ic=1;function Rt(e,t){pt.call(this,e,ic),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Ne(Rt,pt);Rt.prototype.canRender=function(){return!0};Rt.prototype.drawShape=function(t,n,i){var r=ie("rect");return ne(r,{x:0,y:0,width:n.width||0,height:n.height||0}),Si(n)?ne(r,P({},this.FRAME_STYLE,i||{})):ne(r,P({},this.SHAPE_STYLE,i||{})),_e(t,r),r};Rt.prototype.drawConnection=function(t,n,i){var r=mn(n.waypoints,P({},this.CONNECTION_STYLE,i||{}));return _e(t,r),r};Rt.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,o=t.height,l=[["M",n,i],["l",r,0],["l",0,o],["l",-r,0],["z"]];return Ft(l)};Rt.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,o=[];for(i=0;r=n[i];i++)r=r.original||r,o.push([i===0?"M":"L",r.x,r.y]);return Ft(o)};Rt.$inject=["eventBus","styles"];function Pr(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var o=this.style(i,r);return P(o,{class:n})},this.style=function(n,i){!ke(n)&&!i&&(i=n,n=[]);var r=Dt(n,function(o,l){return P(o,e[l]||{})},{});return i?P(r,i):r},this.computeStyle=function(n,i,r){return ke(i)||(r=i,i=[]),t.style(i||[],P({},r,n||{}))}}var ga={__init__:["defaultRenderer"],defaultRenderer:["type",Rt],styles:["type",Pr]};function va(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function _a(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Li(e,t){return Math.round(e*t)/t}function Ea(e){return Qe(e)?e+"px":e}function rc(e){for(;e.parent;)e=e.parent;return e}function oc(e){e=P({},{width:"100%",height:"100%"},e);let t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Ve(n,{position:"relative",overflow:"hidden",width:Ea(e.width),height:Ea(e.height)}),t.appendChild(n),n}function ba(e,t,n){let i=ie("g");rt(i).add(t);let r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}var ac="base",xa=0,sc=1,lc={shape:["x","y","width","height"],connection:["waypoints"]};function F(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}F.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];F.prototype._init=function(e){let t=this._eventBus,n=this._container=oc(e),i=this._svg=ie("svg");ne(i,{width:"100%",height:"100%"}),mi(i,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,o=>{this.focus()}),i.addEventListener("focusin",()=>{this._setFocused(!0)}),i.addEventListener("focusout",()=>{this._setFocused(!1)}),_e(n,i);let r=this._viewport=ba(i,"viewport");e.deferUpdate&&(this._viewboxChanged=yo(it(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};F.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});let e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};F.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))};F.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{let n=Ai(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};F.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)};F.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()};F.prototype.isFocused=function(){return this._focused};F.prototype.getDefaultLayer=function(){return this.getLayer(ac,xa)};F.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};F.prototype._getChildIndex=function(e){return Dt(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};F.prototype._createLayer=function(e,t){typeof t>"u"&&(t=sc);let n=this._getChildIndex(t);return{group:ba(this._viewport,"layer-"+e,n),index:t,visible:!0}};F.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");let t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");let n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;let o=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[o]||null),t.visible=!0,i};F.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");let t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");let n=t.group;return t.visible&&(Bt(n),t.visible=!1),n};F.prototype._removeLayer=function(e){let t=this._layers[e];t&&(delete this._layers[e],Bt(t.group))};F.prototype.getActiveLayer=function(){let e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};F.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(rc(e))||{}).rootElement:void 0};F.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};F.prototype._findPlaneForRoot=function(e){return Ie(this._planes,function(t){return t.rootElement===e})};F.prototype.getContainer=function(){return this._container};F.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(R([i.gfx,i.secondaryGfx],function(r){r&&(n?(e.markers.add(t),rt(r).add(t)):(e.markers.delete(t),rt(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};F.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};F.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};F.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};F.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};F.prototype.getRootElement=function(){let e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};F.prototype.addRootElement=function(e){let t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});let n=e.layer="root-"+t;this._ensureValid("root",e);let i=this.getLayer(n,xa);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};F.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};F.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};F.prototype._removeRoot=function(e){let t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};F.prototype._addRoot=function(e,t){let n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};F.prototype._setRoot=function(e,t){let n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};F.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");let n=lc[e];if(!sr(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};F.prototype._setParent=function(e,t,n){_a(t.children,e,n),e.parent=t};F.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();let r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);let l=o.create(e,t,i);return this._elementRegistry.add(t,l),o.update(e,t,l),r.fire(e+".added",{element:t,gfx:l}),t};F.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};F.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};F.prototype._removeElement=function(e,t){let n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),va(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};F.prototype.removeShape=function(e){return this._removeElement(e,"shape")};F.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};F.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};F.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};F.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};F.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);let t=this._viewport,n=this.getSize(),i,r,o,l,u,c,f;if(e)this._changeViewbox(function(){u=Math.min(n.width/e.width,n.height/e.height);let g=this._svg.createSVGMatrix().scale(u).translate(-e.x,-e.y);nn(t,g)});else return o=this._rootElement?this.getActiveLayer():null,i=o&&o.getBBox()||{},l=nn(t),r=l?l.matrix:To(),u=Li(r.a,1e3),c=Li(-r.e||0,1e3),f=Li(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/u:0,y:f?f/u:0,width:n.width/u,height:n.height/u,scale:u,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};F.prototype.scroll=function(e){let t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=P({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Ca(t,n)}),{x:n.e,y:n.f}};F.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));let i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};let r=rn(e),o=Nn(r),l=this.viewbox(),u=this.zoom(),c,f;l.y+=t.top/u,l.x+=t.left/u,l.width-=(t.right+t.left)/u,l.height-=(t.bottom+t.top)/u;let g=Nn(l);if(!(r.width<l.width&&r.height<l.height))c=r.x-l.x,f=r.y-l.y;else{let H=Math.max(0,o.right-g.right),q=Math.min(0,o.left-g.left),me=Math.max(0,o.bottom-g.bottom),j=Math.min(0,o.top-g.top);c=H||q,f=me||j}this.scroll({dx:-c*u,dy:-f*u})};F.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Li(i.a,1e3)};function Ca(e,t){let n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}F.prototype._fitViewport=function(e){let t=this.viewbox(),n=t.outer,i=t.inner,r,o;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?o={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),o={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(o),this.viewbox(!1).scale};F.prototype._setZoom=function(e,t){let n=this._svg,i=this._viewport,r=n.createSVGMatrix(),o=n.createSVGPoint(),l,u,c,f,g;c=i.getCTM();let C=c.a;return t?(l=P(o,t),u=l.matrixTransform(c.inverse()),f=r.translate(u.x,u.y).scale(1/C*e).translate(-u.x,-u.y),g=c.multiply(f)):g=r.scale(e),Ca(this._viewport,g),g};F.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};F.prototype.getAbsoluteBBox=function(e){let t=this.viewbox(),n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;let i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,l=n.height*t.scale;return{x:i,y:r,width:o,height:l}};F.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var xn="data-element-id";function qe(e){this._elements={},this._eventBus=e}qe.$inject=["eventBus"];qe.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),ne(t,xn,i),n&&ne(n,xn,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};qe.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(ne(i.gfx,xn,""),i.secondaryGfx&&ne(i.secondaryGfx,xn,""),delete t[n])};qe.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};qe.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&ne(t,xn,i),t};qe.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&ne(e,xn);var n=this._elements[t];return n&&n.element};qe.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};qe.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],o=t[r],l=o.element,u=o.gfx;if(e(l,u))return l}};qe.prototype.getAll=function(){return this.filter(function(e){return e})};qe.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)})};qe.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};qe.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function uc(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var l=this.indexOf(o);return l!==-1&&(this.splice(l,1),t.unset(o,r,i)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,l){var u=this.indexOf(o);if(typeof l>"u"){if(u!==-1)return;l=this.length}u!==-1&&this.splice(u,1),this.splice(l,0,o),u===-1&&t.set(o,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function cc(e){return e.__refs_collection===!0}function pc(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function wa(e,t,n){var i=uc(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function dc(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(o){if(o!==r){var l=r;r=null,l&&e.unset(l,i,n),r=o,e.set(r,i,n)}}})}function st(e,t){if(!(this instanceof st))return new st(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}st.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?wa(this,t,e):dc(this,t,e)};st.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return cc(n)||wa(this,t,e),n};st.prototype.ensureBound=function(e,t){pc(e,t)||this.bind(e,t)};st.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};st.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var kr=new st({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Sa=new st({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Aa=new st({name:"attachers",collection:!0},{name:"host"}),Da=new st({name:"outgoing",collection:!0},{name:"source"}),Ma=new st({name:"incoming",collection:!0},{name:"target"});function Bn(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),kr.bind(this,"parent"),Sa.bind(this,"labels"),Da.bind(this,"outgoing"),Ma.bind(this,"incoming")}function Fn(){Bn.call(this),kr.bind(this,"children"),Aa.bind(this,"host"),Aa.bind(this,"attachers")}Ne(Fn,Bn);function Ra(){Bn.call(this),kr.bind(this,"children")}Ne(Ra,Fn);function Pa(){Fn.call(this),Sa.bind(this,"labelTarget")}Ne(Pa,Fn);function ka(){Bn.call(this),Da.bind(this,"source"),Ma.bind(this,"target")}Ne(ka,Bn);var fc={connection:ka,shape:Fn,label:Pa,root:Ra};function Ia(e,t){var n=fc[e];if(!n)throw new Error("unknown type: <"+e+">");return P(new n,t)}function Zt(){this._uid=12}Zt.prototype.createRoot=function(e){return this.create("root",e)};Zt.prototype.createLabel=function(e){return this.create("label",e)};Zt.prototype.createShape=function(e){return this.create("shape",e)};Zt.prototype.createConnection=function(e){return this.create("connection",e)};Zt.prototype.create=function(e,t){return t=P({},t||{}),t.id||(t.id=e+"_"+this._uid++),Ia(e,t)};var ji="__fn",Ta=1e3,hc=Array.prototype.slice;function We(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}We.prototype.on=function(e,t,n,i){if(e=ke(e)?e:[e],Et(t)&&(i=n,n=t,t=Ta),!Qe(t))throw new Error("priority must be a number");var r=n;i&&(r=it(n,i),r[ji]=n[ji]||n);var o=this;e.forEach(function(l){o._addListener(l,{priority:t,callback:r,next:null})})};We.prototype.once=function(e,t,n,i){var r=this;if(Et(t)&&(i=n,n=t,t=Ta),!Qe(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var l=n.apply(i,arguments);return r.off(e,o),l}o[ji]=n,this.on(e,t,o)};We.prototype.off=function(e,t){e=ke(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};We.prototype.createEvent=function(e){var t=new Ln;return t.init(e),t};We.prototype.fire=function(e,t){var n,i,r,o;if(o=hc.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof Ln?n=t:n=this.createEvent(t),o[0]=n;var l=n.type;e!==l&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==l&&(n.type=l)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};We.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};We.prototype._destroy=function(){this._listeners={}};We.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};We.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=mc(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};We.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};We.prototype._getListeners=function(e){return this._listeners[e]};We.prototype._setListeners=function(e,t){this._listeners[e]=t};We.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,o;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,o=n.callback,(o===t||o[ji]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function Ln(){}Ln.prototype.stopPropagation=function(){this.cancelBubble=!0};Ln.prototype.preventDefault=function(){this.defaultPrevented=!0};Ln.prototype.init=function(e){P(this,e||{})};function mc(e,t){return e.apply(null,t)}function Na(e){return e.childNodes[0]}function Va(e){return e.parentNode.childNodes[1]}function Ye(e,t){this._eventBus=e,this._elementRegistry=t}Ye.$inject=["eventBus","elementRegistry"];Ye.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=Va(t),n||(n=ie("g"),rt(n).add("djs-children"),_e(t.parentNode,n))):n=t,n};Ye.prototype._clear=function(e){var t=Na(e);return yi(t),t};Ye.prototype._createContainer=function(e,t,n,i){var r=ie("g");rt(r).add("djs-group"),typeof n<"u"?Oa(r,t,t.childNodes[n]):_e(t,r);var o=ie("g");rt(o).add("djs-element"),rt(o).add("djs-"+e),i&&rt(o).add("djs-frame"),_e(r,o);var l=ie("g");return rt(l).add("djs-visual"),_e(o,l),o};Ye.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,Si(t))};Ye.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=Dt(e,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),R(i,function(r){var o=r.children;if(o){var l=t._getChildrenContainer(r);R(o.slice().reverse(),function(u){var c=n.getGraphics(u);Oa(c.parentNode,l)})}})};Ye.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};Ye.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};Ye.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};Ye.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};Ye.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),vi(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?ne(n,"display","none"):ne(n,"display","block")}};Ye.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Bt(t.parentNode)};function Oa(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}var Ba={__depends__:[ga],__init__:["canvas"],canvas:["type",F],elementRegistry:["type",qe],elementFactory:["type",Zt],eventBus:["type",We],graphicsFactory:["type",Ye]};function yc(e){var t=new Rr(e);return t.init(),t}function gc(e){e=e||{};var t={config:["value",e]},n=[t,Ba].concat(e.modules||[]);return yc(n)}function Pt(e,t){this._injector=t||gc(e),this.get("eventBus").fire("diagram.init")}Pt.prototype.get=function(e,t){return this._injector.get(e,t)};Pt.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Pt.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Pt.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Nr(){}Nr.prototype.get=function(e){return this.$model.properties.get(this,e)};Nr.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function La(e,t){this.model=e,this.properties=t}La.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Nr.prototype);R(e.properties,function(l){!l.isMany&&l.default!==void 0&&(i[l.name]=l.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(l){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),R(l,it(function(u,c){this.set(c,u)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var vc={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},ja={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Hi(e,t){var n=ja[e];return n?n(t):t}function Ir(e){return!!vc[e]}function Vr(e){return!!ja[e]}function Le(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function lt(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}lt.prototype.build=function(){return vo(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};lt.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};lt.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,l=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var u=r.indexOf(e);if(u===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(u,1),this.addProperty(t,n?void 0:u,l),o[i.name]=o[i.localName]=t};lt.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=Le(r[0],i),l=Le(r[1],o.prefix).name,u=this.propertiesByName[l];if(u)this.replaceProperty(u,e,n);else throw new Error("refined property <"+l+"> not found");delete e.redefines};lt.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};lt.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};lt.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};lt.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};lt.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};lt.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};lt.prototype.hasProperty=function(e){return this.propertiesByName[e]};lt.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(R(e.properties,it(function(o){o=P({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var l=o.replaces,u=o.redefines;l||u?this.redefineProperty(o,l||u,l):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(e),n[r]=e)};function Qt(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,R(e,it(this.registerPackage,this))}Qt.prototype.getPackage=function(e){return this.packageMap[e]};Qt.prototype.getPackages=function(){return this.packages};Qt.prototype.registerPackage=function(e){e=P({},e);var t=this.packageMap;Fa(t,e,"prefix"),Fa(t,e,"uri"),R(e.types,it(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Qt.prototype.registerType=function(e,t){e=P({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:P(e.meta||{})});var n=Le(e.name,t.prefix),i=n.name,r={};R(e.properties,it(function(o){var l=Le(o.name,n.prefix),u=l.name;Ir(o.type)||(o.type=Le(o.type,l.prefix).name),P(o,{ns:l,name:u}),r[u]=o},this)),P(e,{ns:n,name:i,propertiesByName:r}),R(e.extends,it(function(o){var l=Le(o,n.prefix),u=this.typeMap[l.name];u.traits=u.traits||[],u.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};Qt.prototype.mapTypes=function(e,t,n){var i=Ir(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(c,f){var g=Le(c,Ir(c)?"":e.prefix);r.mapTypes(g,t,f)}function l(c){return o(c,!0)}function u(c){return o(c,!1)}if(!i)throw new Error("unknown type <"+e.name+">");R(i.superClass,n?l:u),t(i,!n),R(i.traits,l)};Qt.prototype.getEffectiveDescriptor=function(e){var t=Le(e),n=new lt(t);this.mapTypes(t,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};Qt.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function Fa(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function on(e){this.model=e}on.prototype.set=function(e,t,n){if(!Je(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;_c(n)?i?delete e[r]:delete e.$attrs[Tr(t)]:i?r in e?e[r]=n:Ha(e,i,n):e.$attrs[Tr(t)]=n};on.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[Tr(t)];var i=n.name;return!e[i]&&n.isMany&&Ha(e,n,[]),e[i]};on.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=P({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};on.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};on.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};on.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;let r=n.config.strict;if(typeof r<"u"){let o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw o;typeof console<"u"&&console.warn(o)}return null};function _c(e){return typeof e>"u"}function Ha(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Tr(e){return e.replace(/^:/,"")}function et(e,t={}){this.properties=new on(this),this.factory=new La(this,this.properties),this.registry=new Qt(e,this.properties),this.typeCache={},this.config=t}et.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};et.prototype.getType=function(e){var t=this.typeCache,n=Je(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};et.prototype.createAny=function(e,t,n){var i=Le(e),r={$type:e,$instanceOf:function(l){return l===this.$type},get:function(l){return this[l]},set:function(l,u){go(this,[l],u)}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),R(n,function(l,u){Ze(l)&&l.value!==void 0?r[l.name]=l.value:r[u]=l}),r};et.prototype.getPackage=function(e){return this.registry.getPackage(e)};et.prototype.getPackages=function(){return this.registry.getPackages()};et.prototype.getElementDescriptor=function(e){return e.$descriptor};et.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};et.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};et.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var $a=String.fromCharCode,Ec=Object.prototype.hasOwnProperty,bc=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,jn={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(jn).forEach(function(e){jn[e.toUpperCase()]=jn[e]});function xc(e,t,n,i){return i?Ec.call(jn,i)?jn[i]:"&"+i+";":$a(t||parseInt(n,16))}function an(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(bc,xc):e}var Wa="non-whitespace outside of root node";function Cn(e){return new Error(e)}function Ua(e){return"missing namespace for prefix <"+e+">"}function $i(e){return{get:e,enumerable:!0}}function Cc(e){var t={},n;for(n in e)t[n]=e[n];return t}function Or(e){return e+"$uri"}function wc(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Or(i)]=n;return t}function za(){return{line:0,column:0}}function Ac(e){throw e}function Br(e){if(!this)return new Br(e);var t=e&&e.proxy,n,i,r,o,l=Ac,u,c,f,g,C=za,H=!1,q=!1,me=null,j=!1,re;function pe(m){m instanceof Error||(m=Cn(m)),me=m,l(m,C)}function ee(m){u&&(m instanceof Error||(m=Cn(m)),u(m,C))}this.on=function(m,x){if(typeof x!="function")throw Cn("required args <name, cb>");switch(m){case"openTag":i=x;break;case"text":n=x;break;case"closeTag":r=x;break;case"error":l=x;break;case"warn":u=x;break;case"cdata":o=x;break;case"attention":g=x;break;case"question":f=x;break;case"comment":c=x;break;default:throw Cn("unsupported event: "+m)}return this},this.ns=function(m){if(typeof m>"u"&&(m={}),typeof m!="object")throw Cn("required args <nsMap={}>");var x={},D;for(D in m)x[D]=m[D];return q=!0,re=x,this},this.parse=function(m){if(typeof m!="string")throw Cn("required args <xml=string>");return me=null,w(m),C=za,j=!1,me},this.stop=function(){j=!0};function w(m){var x=q?[]:null,D=q?wc(re):null,L,v=[],k=0,A=!1,V=!1,I=0,N=0,X,Ct,ye,J,mt,yt,Ce,ut,_,E="",B=0,ue;function tt(){if(ue!==null)return ue;var s,a,d,h=q&&D.xmlns,y=q&&H?[]:null,b=B,O=E,Z=O.length,Ae,xe,Te,ct,de,Nt={},zn={},nt,U,oe;e:for(;b<Z;b++)if(nt=!1,U=O.charCodeAt(b),!(U===32||U<14&&U>8)){for((U<65||U>122||U>90&&U<97)&&U!==95&&U!==58&&(ee("illegal first char attribute name"),nt=!0),oe=b+1;oe<Z;oe++)if(U=O.charCodeAt(oe),!(U>96&&U<123||U>64&&U<91||U>47&&U<59||U===46||U===45||U===95)){if(U===32||U<14&&U>8){ee("missing attribute value"),b=oe;continue e}if(U===61)break;ee("illegal attribute name char"),nt=!0}if(de=O.substring(b,oe),de==="xmlns:xmlns"&&(ee("illegal declaration of xmlns"),nt=!0),U=O.charCodeAt(oe+1),U===34)oe=O.indexOf('"',b=oe+2),oe===-1&&(oe=O.indexOf("'",b),oe!==-1&&(ee("attribute value quote missmatch"),nt=!0));else if(U===39)oe=O.indexOf("'",b=oe+2),oe===-1&&(oe=O.indexOf('"',b),oe!==-1&&(ee("attribute value quote missmatch"),nt=!0));else for(ee("missing attribute value quotes"),nt=!0,oe=oe+1;oe<Z&&(U=O.charCodeAt(oe+1),!(U===32||U<14&&U>8));oe++);for(oe===-1&&(ee("missing closing quotes"),oe=Z,nt=!0),nt||(Te=O.substring(b,oe)),b=oe;oe+1<Z&&(U=O.charCodeAt(oe+1),!(U===32||U<14&&U>8));oe++)b===oe&&(ee("illegal character after attribute end"),nt=!0);if(b=oe+1,nt)continue e;if(de in zn){ee("attribute <"+de+"> already defined");continue}if(zn[de]=!0,!q){Nt[de]=Te;continue}if(H){if(xe=de==="xmlns"?"xmlns":de.charCodeAt(0)===120&&de.substr(0,6)==="xmlns:"?de.substr(6):null,xe!==null){if(s=an(Te),a=Or(xe),ct=re[s],!ct){if(xe==="xmlns"||a in D&&D[a]!==s)do ct="ns"+k++;while(typeof D[ct]<"u");else ct=xe;re[s]=ct}D[xe]!==ct&&(Ae||(D=Cc(D),Ae=!0),D[xe]=ct,xe==="xmlns"&&(D[Or(ct)]=s,h=ct),D[a]=s),Nt[de]=Te;continue}y.push(de,Te);continue}if(U=de.indexOf(":"),U===-1){Nt[de]=Te;continue}if(!(d=D[de.substring(0,U)])){ee(Ua(de.substring(0,U)));continue}de=h===d?de.substr(U+1):d+de.substr(U),Nt[de]=Te}if(H)for(b=0,Z=y.length;b<Z;b++){if(de=y[b++],Te=y[b],U=de.indexOf(":"),U!==-1){if(!(d=D[de.substring(0,U)])){ee(Ua(de.substring(0,U)));continue}de=h===d?de.substr(U+1):d+de.substr(U)}Nt[de]=Te}return ue=Nt}function p(){for(var s=/(\r\n|\r|\n)/g,a=0,d=0,h=0,y=N,b,O;I>=h&&(b=s.exec(m),!(!b||(y=b[0].length+b.index,y>I)));)a+=1,h=y;return I==-1?(d=y,O=m.substring(N)):N===0?O=m.substring(N,I):(d=I-h,O=N==-1?m.substring(I):m.substring(I,N+1)),{data:O,line:a,column:d}}for(C=p,t&&(_=Object.create({},{name:$i(function(){return Ce}),originalName:$i(function(){return ut}),attrs:$i(tt),ns:$i(function(){return D})}));N!==-1;){if(m.charCodeAt(N)===60?I=N:I=m.indexOf("<",N),I===-1){if(v.length)return pe("unexpected end of file");if(N===0)return pe("missing start tag");N<m.length&&m.substring(N).trim()&&ee(Wa);return}if(N!==I){if(v.length){if(n&&(n(m.substring(N,I),an,C),j))return}else if(m.substring(N,I).trim()&&(ee(Wa),j))return}if(J=m.charCodeAt(I+1),J===33){if(ye=m.charCodeAt(I+2),ye===91&&m.substr(I+3,6)==="CDATA["){if(N=m.indexOf("]]>",I),N===-1)return pe("unclosed cdata");if(o&&(o(m.substring(I+9,N),C),j))return;N+=3;continue}if(ye===45&&m.charCodeAt(I+3)===45){if(N=m.indexOf("-->",I),N===-1)return pe("unclosed comment");if(c&&(c(m.substring(I+4,N),an,C),j))return;N+=3;continue}}if(J===63){if(N=m.indexOf("?>",I),N===-1)return pe("unclosed question");if(f&&(f(m.substring(I,N+2),C),j))return;N+=2;continue}for(X=I+1;;X++){if(mt=m.charCodeAt(X),isNaN(mt))return N=-1,pe("unclosed tag");if(mt===34)ye=m.indexOf('"',X+1),X=ye!==-1?ye:X;else if(mt===39)ye=m.indexOf("'",X+1),X=ye!==-1?ye:X;else if(mt===62){N=X;break}}if(J===33){if(g&&(g(m.substring(I,N+1),an,C),j))return;N+=1;continue}if(ue={},J===47){if(A=!1,V=!0,!v.length)return pe("missing open tag");if(X=Ce=v.pop(),ye=I+2+X.length,m.substring(I+2,ye)!==X)return pe("closing tag mismatch");for(;ye<N;ye++)if(J=m.charCodeAt(ye),!(J===32||J>8&&J<14))return pe("close tag")}else{if(m.charCodeAt(N-1)===47?(X=Ce=m.substring(I+1,N-1),A=!0,V=!0):(X=Ce=m.substring(I+1,N),A=!0,V=!1),!(J>96&&J<123||J>64&&J<91||J===95||J===58))return pe("illegal first char nodeName");for(ye=1,Ct=X.length;ye<Ct;ye++)if(J=X.charCodeAt(ye),!(J>96&&J<123||J>64&&J<91||J>47&&J<59||J===45||J===95||J==46)){if(J===32||J<14&&J>8){Ce=X.substring(0,ye),ue=null;break}return pe("invalid nodeName")}V||v.push(Ce)}if(q){if(L=D,A&&(V||x.push(L),ue===null&&(H=X.indexOf("xmlns",ye)!==-1)&&(B=ye,E=X,tt(),H=!1)),ut=Ce,J=Ce.indexOf(":"),J!==-1){if(yt=D[Ce.substring(0,J)],!yt)return pe("missing namespace on <"+ut+">");Ce=Ce.substr(J+1)}else yt=D.xmlns;yt&&(Ce=yt+":"+Ce)}if(A&&(B=ye,E=X,i&&(t?i(_,an,V,C):i(Ce,tt,an,V,C),j)))return;if(V){if(r&&(r(t?_:Ce,an,A,C),j))return;q&&(A?D=L:D=x.pop())}N+=1}}}function Ga(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Fr={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Ka="property";function qa(e){return e.xml&&e.xml.serialize}function Sc(e){let t=qa(e);return t!==Ka&&(t||null)}function Dc(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ya(e,t){return Ga(t)?e.prefix+":"+Dc(e.localName):e.name}function Mc(e,t){var n=e.name,i=e.localName,r=t&&t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function Rc(e,t,n){let i=Le(e,t.xmlns),r=`${t[i.prefix]||i.prefix}:${i.localName}`,o=Le(r);var l=n.getPackage(o.prefix);return Mc(o,l)}function Jt(e){return new Error(e)}function Ut(e){return e.$descriptor}function Pc(e){P(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw Jt("expected element");var n=this.elementsById,i=Ut(t),r=i.idProperty,o;if(r&&(o=t.get(r.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw Jt("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Hn(){}Hn.prototype.handleEnd=function(){};Hn.prototype.handleText=function(){};Hn.prototype.handleNode=function(){};function Lr(){}Lr.prototype=Object.create(Hn.prototype);Lr.prototype.handleNode=function(){return this};function An(){}An.prototype=Object.create(Hn.prototype);An.prototype.handleText=function(e){this.body=(this.body||"")+e};function $n(e,t){this.property=e,this.context=t}$n.prototype=Object.create(An.prototype);$n.prototype.handleNode=function(e){if(this.element)throw Jt("expected no sub nodes");return this.element=this.createReference(e),this};$n.prototype.handleEnd=function(){this.element.id=this.body};$n.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function jr(e,t){this.element=t,this.propertyDesc=e}jr.prototype=Object.create(An.prototype);jr.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Hi(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Wi(){}Wi.prototype=Object.create(An.prototype);Wi.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function Ue(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}Ue.prototype=Object.create(Wi.prototype);Ue.prototype.addReference=function(e){this.context.addReference(e)};Ue.prototype.handleText=function(e){var t=this.element,n=Ut(t),i=n.bodyProperty;if(!i)throw Jt("unexpected body text <"+e+">");An.prototype.handleText.call(this,e)};Ue.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Ut(t),i=n.bodyProperty;i&&e!==void 0&&(e=Hi(i.type,e),t.set(i.name,e))};Ue.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Ut(n),r=this.context,o=new n({}),l=this.model,u;return R(t,function(c,f){var g=i.propertiesByName[f],C;g&&g.isReference?g.isMany?(C=c.split(" "),R(C,function(H){r.addReference({element:o,property:g.ns.name,id:H})})):r.addReference({element:o,property:g.ns.name,id:c}):(g?c=Hi(g.type,c):f==="xmlns"?f=":"+f:(u=Le(f,i.ns.prefix),l.getPackage(u.prefix)&&r.addWarning({message:"unknown attribute <"+f+">",element:o,property:f,value:c})),o.set(f,c))}),o};Ue.prototype.getPropertyForNode=function(e){var t=e.name,n=Le(t),i=this.type,r=this.model,o=Ut(i),l=n.name,u=o.propertiesByName[l];if(u&&!u.isAttr){let f=Sc(u);if(f){let g=e.attributes[f];if(g){let C=Rc(g,e.ns,r),H=r.getType(C);return P({},u,{effectiveType:Ut(H).name})}}return u}var c=r.getPackage(n.prefix);if(c){let f=Ya(n,c),g=r.getType(f);if(u=Ie(o.properties,function(C){return!C.isVirtual&&!C.isReference&&!C.isAttribute&&g.hasType(C.type)}),u)return P({},u,{effectiveType:Ut(g).name})}else if(u=Ie(o.properties,function(f){return!f.isReference&&!f.isAttribute&&f.type==="Element"}),u)return u;throw Jt("unrecognized element <"+n.name+">")};Ue.prototype.toString=function(){return"ElementDescriptor["+Ut(this.type).name+"]"};Ue.prototype.valueHandler=function(e,t){return new jr(e,t)};Ue.prototype.referenceHandler=function(e){return new $n(e,this.context)};Ue.prototype.handler=function(e){return e==="Element"?new wn(this.model,e,this.context):new Ue(this.model,e,this.context)};Ue.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,Vr(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var o=r.element;return o!==void 0&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(P(o,{element:i}),this.context.addReference(o)):o.$parent=i),r};function Hr(e,t,n){Ue.call(this,e,t,n)}Hr.prototype=Object.create(Ue.prototype);Hr.prototype.createElement=function(e){var t=e.name,n=Le(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),l=o&&Ya(n,o)||t;if(!r.hasType(l))throw Jt("unexpected element <"+e.originalName+">");return Ue.prototype.createElement.call(this,e)};function wn(e,t,n){this.model=e,this.context=n}wn.prototype=Object.create(Wi.prototype);wn.prototype.createElement=function(e){var t=e.name,n=Le(t),i=n.prefix,r=e.ns[i+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)};wn.prototype.handleChild=function(e){var t=new wn(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};wn.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Ui(e){e instanceof et&&(e={model:e}),P(this,{lax:!1},e)}Ui.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof Ue?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,l=new Pc(P({},t,{rootHandler:i})),u=new Br({proxy:!0}),c=kc();i.context=l,c.push(i);function f(x,D,L){var v=D(),k=v.line,A=v.column,V=v.data;V.charAt(0)==="<"&&V.indexOf(" ")!==-1&&(V=V.slice(0,V.indexOf(" "))+">");var I="unparsable content "+(V?V+" ":"")+`detected
	line: `+k+`
	column: `+A+`
	nested error: `+x.message;if(L)return l.addWarning({message:I,error:x}),!0;throw Jt(I)}function g(x,D){return f(x,D,!0)}function C(){var x=l.elementsById,D=l.references,L,v;for(L=0;v=D[L];L++){var k=v.element,A=x[v.id],V=Ut(k).propertiesByName[v.property];if(A||l.addWarning({message:"unresolved reference <"+v.id+">",element:v.element,property:v.property,value:v.id}),V.isMany){var I=k.get(V.name),N=I.indexOf(v);N===-1&&(N=I.length),A?I[N]=A:I.splice(N,1)}else k.set(V.name,A)}}function H(){c.pop().handleEnd()}var q=/^<\?xml /i,me=/ encoding="([^"]+)"/i,j=/^utf-8$/i;function re(x){if(q.test(x)){var D=me.exec(x),L=D&&D[1];!L||j.test(L)||l.addWarning({message:"unsupported document encoding <"+L+">, falling back to UTF-8"})}}function pe(x,D){var L=c.peek();try{c.push(L.handleNode(x))}catch(v){f(v,D,o)&&c.push(new Lr)}}function ee(x,D){try{c.peek().handleText(x)}catch(L){g(L,D)}}function w(x,D){x.trim()&&ee(x,D)}var m=r.getPackages().reduce(function(x,D){return x[D.uri]=D.prefix,x},Object.entries(Fr).reduce(function(x,[D,L]){return x[L]=D,x},r.config&&r.config.nsMap||{}));return u.ns(m).on("openTag",function(x,D,L,v){var k=x.attrs||{},A=Object.keys(k).reduce(function(I,N){var X=D(k[N]);return I[N]=X,I},{}),V={name:x.name,originalName:x.originalName,attributes:A,ns:x.ns};pe(V,v)}).on("question",re).on("closeTag",H).on("cdata",ee).on("text",function(x,D,L){w(D(x),L)}).on("error",f).on("warn",g),new Promise(function(x,D){var L;try{u.parse(e),C()}catch(I){L=I}var v=i.element;!L&&!v&&(L=Jt("failed to parse document as <"+i.type.$descriptor.name+">"));var k=l.warnings,A=l.references,V=l.elementsById;return L?(L.warnings=k,D(L)):x({rootElement:v,elementsById:V,references:A,warnings:k})})};Ui.prototype.handler=function(e){return new Hr(this.model,e)};function kc(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var Ic=`<?xml version="1.0" encoding="UTF-8"?>
`,Tc=/<|>|'|"|&|\n\r|\n/g,Xa=/<|>|&/g;function kt(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}kt.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e};kt.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]};kt.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)};kt.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)};kt.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)};kt.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t};kt.prototype.getNSKey=function(e){return e.prefix!==void 0?e.uri+"|"+e.prefix:e.uri};kt.prototype.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);this.used[n]=this.byUri(t),this.parent&&this.parent.logUsed(e)};kt.prototype.getUsed=function(e){var t=[].concat(this.wellknown,this.custom);return t.filter(n=>{var i=this.getNSKey(n);return this.used[i]})};function Nc(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Vc(e,t){return Ga(t)?Nc(e):e}function Za(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Qa(e){return Je(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Oc(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function Bc(e,t){return t.isGeneric?P({localName:t.ns.localName},e):P({localName:Vc(t.ns.localName,t.$pkg)},e)}function Fc(e,t){return P({localName:t.ns.localName},e)}function Lc(e){var t=e.$descriptor;return St(t.properties,function(n){var i=n.name;if(n.isVirtual||!At(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var jc={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Hc={"<":"lt",">":"gt","&":"amp"};function Ja(e,t,n){return e=Je(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function $c(e){return Ja(e,Tc,jc)}function Wc(e){return Ja(e,Xa,Hc)}function Uc(e){return St(e,function(t){return t.isAttr})}function zc(e){return St(e,function(t){return!t.isAttr})}function $r(e){this.tagName=e}$r.prototype.build=function(e){return this.element=e,this};$r.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function sn(){}sn.prototype.serializeValue=sn.prototype.serializeTo=function(e){e.append(this.escape?Wc(this.value):this.value)};sn.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Xa)!==-1&&(this.escape=!0),this};function Wr(e){this.tagName=e}Za(Wr,sn);Wr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function ge(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}ge.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,o=t.isGeneric;return o?i=this.parseGenericNsAttributes(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o?this.parseGenericContainments(e):(r=Lc(e),this.parseAttributes(Uc(r)),this.parseContainments(zc(r))),this.parseGenericAttributes(e,i),this};ge.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Bc(t,e)};ge.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Fc(t,e)};ge.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};ge.prototype.nsAttributeName=function(e){var t;if(Je(e)?t=Le(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:P({localName:t.localName},n)};ge.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter(([t,n])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,n)).map(([t,n])=>({name:t,value:n}))};ge.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push(new sn().build({type:"String"},t));var n=e.$children;n&&R(n,i=>{this.body.push(new ge(this).build(i))})};ge.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=Le(t),o;if(r.prefix==="xmlns"&&(o={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(o,!0,!0);else{var l=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(l)}};ge.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=[];return R(n,function(r,o){var l=t.parseNsAttribute(e,o,r);l&&i.push(l)}),i};ge.prototype.parseGenericAttributes=function(e,t){var n=this;R(t,function(i){try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){typeof console<"u"&&console.warn(`missing namespace information for <${i.name}=${i.value}> on`,e,r)}})};ge.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;R(e,function(r){var o=i.get(r.name),l=r.isReference,u=r.isMany;if(u||(o=[o]),r.isBody)n.push(new sn().build(r,o[0]));else if(Vr(r.type))R(o,function(f){n.push(new Wr(t.addTagName(t.nsPropertyTagName(r))).build(r,f))});else if(l)R(o,function(f){n.push(new $r(t.addTagName(t.nsPropertyTagName(r))).build(f))});else{var c=qa(r);R(o,function(f){var g;c?c===Ka?g=new ge(t,r):g=new zi(t,r,c):g=new ge(t),n.push(g.build(f))})}})};ge.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new kt(i):t=i),t};ge.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix,l=i.byUri(r);return(!l||n)&&i.add(e,t),i.mapPrefix(o,r),e};ge.prototype.logNamespaceUsed=function(e,t){var n=this.getNamespaces(t),i=e.prefix,r=e.uri,o,l,u;if(!i&&!r)return{localName:e.localName};if(u=n.defaultUriByPrefix(i),r=r||u||n.uriByPrefix(i),!r)throw new Error("no namespace uri given for prefix <"+i+">");if(e=n.byUri(r),!e&&!i&&(e=this.logNamespace({uri:r},u===r,!0)),!e){for(o=i,l=1;n.uriByPrefix(o);)o=i+"_"+l++;e=this.logNamespace({prefix:o,uri:r},u===r)}return i&&n.mapPrefix(i,r),e};ge.prototype.parseAttributes=function(e){var t=this,n=this.element;R(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var o=[];R(r,function(l){o.push(l.id)}),r=o.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};ge.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Qa(e)};ge.prototype.addAttribute=function(e,t){var n=this.attrs;Je(t)&&(t=$c(t));var i=ho(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};ge.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=Oc(n).concat(t)),R(t,function(i){e.append(" ").append(Qa(i.name)).append('="').append(i.value).append('"')})};ge.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==sn;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),R(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function zi(e,t,n){ge.call(this,e,t),this.serialization=n}Za(zi,ge);zi.prototype.parseNsAttributes=function(e){var t=ge.prototype.parseNsAttributes.call(this,e).filter(l=>l.name!==this.serialization),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t};zi.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Gc(){this.value="",this.write=function(e){this.value+=e}}function Kc(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function es(e){e=P({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new Gc,o=new Kc(r,e.format);e.preamble&&o.append(Ic);var l=new ge,u=n.$model;if(l.getNamespaces().mapDefaultPrefixes(qc(u)),l.build(n).serializeTo(o),!i)return r.value}return{toXML:t}}function qc(e){let t=e.config&&e.config.nsMap||{},n={};for(let i in Fr)n[i]=Fr[i];for(let i in t){let r=t[i];n[r]=i}for(let i of e.getPackages())n[i.prefix]=i.uri;return n}function Gi(e,t){et.call(this,e,t)}Gi.prototype=Object.create(et.prototype);Gi.prototype.fromXML=function(e,t,n){Je(t)||(n=t,t="bpmn:Definitions");var i=new Ui(P({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Gi.prototype.toXML=function(e,t){var n=new es(t);return new Promise(function(i,r){try{var o=n.toXML(e);return i({xml:o})}catch(l){return r(l)}})};var Yc="BPMN20",Xc="http://www.omg.org/spec/BPMN/20100524/MODEL",Zc="bpmn",Qc=[],Jc=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],ep=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],tp={tagAlias:"lowerCase",typePrefix:"t"},np={name:Yc,uri:Xc,prefix:Zc,associations:Qc,types:Jc,enumerations:ep,xml:tp},ip="BPMNDI",rp="http://www.omg.org/spec/BPMN/20100524/DI",op="bpmndi",ap=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],sp=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],lp=[],up={name:ip,uri:rp,prefix:op,types:ap,enumerations:sp,associations:lp},cp="DC",pp="http://www.omg.org/spec/DD/20100524/DC",dp="dc",fp=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],hp=[],mp={name:cp,uri:pp,prefix:dp,types:fp,associations:hp},yp="DI",gp="http://www.omg.org/spec/DD/20100524/DI",vp="di",_p=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],Ep=[],bp={tagAlias:"lowerCase"},xp={name:yp,uri:gp,prefix:vp,types:_p,associations:Ep,xml:bp},Cp="bpmn.io colors for BPMN",wp="http://bpmn.io/schema/bpmn/biocolor/1.0",Ap="bioc",Sp=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],Dp=[],Mp=[],Rp={name:Cp,uri:wp,prefix:Ap,types:Sp,enumerations:Dp,associations:Mp},Pp="BPMN in Color",kp="http://www.omg.org/spec/BPMN/non-normative/color/1.0",Ip="color",Tp=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],Np=[],Vp=[],Op={name:Pp,uri:kp,prefix:Ip,types:Tp,enumerations:Np,associations:Vp},Bp={bpmn:np,bpmndi:up,dc:mp,di:xp,bioc:Rp,color:Op};function ts(e,t){let n=P({},Bp,e);return new Gi(n,t)}var Fp="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function ns(e){At(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(Fp)}})}function Xe(e,t){return e.$instanceOf(t)}function Lp(e){return Ie(e.rootElements,function(t){return Xe(t,"bpmn:Process")||Xe(t,"bpmn:Collaboration")})}function Ur(e){var t={},n=[],i={};function r(_,E){return function(B){_(B,E)}}function o(_){t[_.id]=_}function l(_){return t[_.id]}function u(_,E){var B=_.gfx;if(B)throw new Error(`already rendered ${Oe(_)}`);return e.element(_,i[_.id],E)}function c(_,E){return e.root(_,i[_.id],E)}function f(_,E){try{var B=i[_.id]&&u(_,E);return o(_),B}catch(ue){g(ue.message,{element:_,error:ue}),console.error(`failed to import ${Oe(_)}`,ue)}}function g(_,E){e.error(_,E)}var C=this.registerDi=function(E){var B=E.bpmnElement;B?i[B.id]?g(`multiple DI elements defined for ${Oe(B)}`,{element:B}):(i[B.id]=E,ns(B)):g(`no bpmnElement referenced in ${Oe(E)}`,{element:E})};function H(_){q(_.plane)}function q(_){C(_),R(_.planeElement,me)}function me(_){C(_)}this.handleDefinitions=function(E,B){var ue=E.diagrams;if(B&&ue.indexOf(B)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!B&&ue&&ue.length&&(B=ue[0]),!B)throw new Error("no diagram to display");i={},H(B);var tt=B.plane;if(!tt)throw new Error(`no plane for ${Oe(B)}`);var p=tt.bpmnElement;if(!p)if(p=Lp(E),p)g(`correcting missing bpmnElement on ${Oe(tt)} to ${Oe(p)}`),tt.bpmnElement=p,C(tt);else throw new Error("no process or collaboration to display");var s=c(p,tt);if(Xe(p,"bpmn:Process")||Xe(p,"bpmn:SubProcess"))re(p,s);else if(Xe(p,"bpmn:Collaboration"))Ce(p,s),pe(E.rootElements,s);else throw new Error(`unsupported bpmnElement for ${Oe(tt)}: ${Oe(p)}`);j(n)};var j=this.handleDeferred=function(){for(var E;n.length;)E=n.shift(),E()};function re(_,E){J(_,E),k(_.ioSpecification,E),v(_.artifacts,E),o(_)}function pe(_,E){var B=St(_,function(ue){return!l(ue)&&Xe(ue,"bpmn:Process")&&ue.laneSets});B.forEach(r(re,E))}function ee(_,E){f(_,E)}function w(_,E){R(_,r(ee,E))}function m(_,E){f(_,E)}function x(_,E){f(_,E)}function D(_,E){f(_,E)}function L(_,E){f(_,E)}function v(_,E){R(_,function(B){Xe(B,"bpmn:Association")?n.push(function(){L(B,E)}):L(B,E)})}function k(_,E){_&&(R(_.dataInputs,r(x,E)),R(_.dataOutputs,r(D,E)))}var A=this.handleSubProcess=function(E,B){J(E,B),v(E.artifacts,B)};function V(_,E){var B=f(_,E);Xe(_,"bpmn:SubProcess")&&A(_,B||E),Xe(_,"bpmn:Activity")&&k(_.ioSpecification,E),n.push(function(){R(_.dataInputAssociations,r(m,E)),R(_.dataOutputAssociations,r(m,E))})}function I(_,E){f(_,E)}function N(_,E){f(_,E)}function X(_,E){n.push(function(){var B=f(_,E);_.childLaneSet&&Ct(_.childLaneSet,B||E),ut(_)})}function Ct(_,E){R(_.lanes,r(X,E))}function ye(_,E){R(_,r(Ct,E))}function J(_,E){mt(_.flowElements,E),_.laneSets&&ye(_.laneSets,E)}function mt(_,E){R(_,function(B){Xe(B,"bpmn:SequenceFlow")?n.push(function(){I(B,E)}):Xe(B,"bpmn:BoundaryEvent")?n.unshift(function(){V(B,E)}):Xe(B,"bpmn:FlowNode")?V(B,E):Xe(B,"bpmn:DataObject")||(Xe(B,"bpmn:DataStoreReference")||Xe(B,"bpmn:DataObjectReference")?N(B,E):g(`unrecognized flowElement ${Oe(B)} in context ${Oe(E&&E.businessObject)}`,{element:B,context:E}))})}function yt(_,E){var B=f(_,E),ue=_.processRef;ue&&re(ue,B||E)}function Ce(_,E){R(_.participants,r(yt,E)),n.push(function(){w(_.messageFlows,E)}),v(_.artifacts,E)}function ut(_){R(_.flowNodeRef,function(E){var B=E.get("lanes");B&&B.push(_)})}}function is(e,t,n){var i,r,o,l,u=[];function c(f,g){var C={root:function(j,re){return i.add(j,re)},element:function(j,re,pe){return i.add(j,re,pe)},error:function(j,re){u.push({message:j,context:re})}},H=new Ur(C);g=g||f.diagrams&&f.diagrams[0];var q=jp(f,g);if(!q)throw new Error("no diagram to display");R(q,function(j){H.handleDefinitions(f,j)});var me=g.plane.bpmnElement.id;o.setRootElement(o.findRoot(me+"_plane")||o.findRoot(me))}return new Promise(function(f,g){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),c(t,n),r.fire("import.render.complete",{error:l,warnings:u}),f({warnings:u})}catch(C){return C.warnings=u,g(C)}})}function jp(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!T(n,"bpmn:Process")&&!T(n,"bpmn:Collaboration")&&(i=Hp(n));var r;T(i,"bpmn:Collaboration")?r=i:r=Ie(e.rootElements,function(f){if(T(f,"bpmn:Collaboration"))return Ie(f.participants,function(g){return g.processRef===i})});var o=[i];r&&(o=mo(r.participants,function(f){return f.processRef}),o.push(r));var l=rs(o),u=[t],c=[n];return R(e.diagrams,function(f){if(f.plane){var g=f.plane.bpmnElement;l.indexOf(g)!==-1&&c.indexOf(g)===-1&&(u.push(f),c.push(g))}}),u}}function rs(e){var t=[];return R(e,function(n){n&&(t.push(n),t=t.concat(rs(n.flowElements)))}),t}function Hp(e){for(var t=e;t;){if(T(t,"bpmn:Process"))return t;t=t.$parent}}var $p='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',zr=$p,Gr={verticalAlign:"middle"},Kr={color:"#404040"},Wp={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},Up={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},zp={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},Gp='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+zr+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',It;function Kp(){It=Ke(Gp),Ve(It,Wp),Ve(at("svg",It),Gr),Ve(at(".backdrop",It),Up),Ve(at(".notice",It),zp),Ve(at(".link",It),Kr,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function os(){It||(Kp(),In.bind(It,".backdrop","click",function(e){document.body.removeChild(It)})),document.body.appendChild(It)}function be(e){e=P({},Yp,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e),Zp(this._container)}Ne(be,Pt);be.prototype.importXML=function(t,n){return wt(this,null,function*(){let i=this;function r(l){return i.get("eventBus").createEvent(l)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let l;try{l=yield this._moddle.fromXML(t,"bpmn:Definitions")}catch(H){throw this._emit("import.parse.complete",{error:H}),H}let u=l.rootElement,c=l.references,f=l.warnings,g=l.elementsById;o=o.concat(f),u=this._emit("import.parse.complete",r({error:null,definitions:u,elementsById:g,references:c,warnings:o}))||u;let C=yield this.importDefinitions(u,n);return o=o.concat(C.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(l){let u=l;throw o=o.concat(u.warnings||[]),Ki(u,o),u=qp(u),this._emit("import.done",{error:u,warnings:u.warnings}),u}})};be.prototype.importDefinitions=function(t,n){return wt(this,null,function*(){return this._setDefinitions(t),{warnings:(yield this.open(n)).warnings}})};be.prototype.open=function(t){return wt(this,null,function*(){let n=this._definitions,i=t;if(!n){let o=new Error("no XML imported");throw Ki(o,[]),o}if(typeof t=="string"&&(i=Xp(n,t),!i)){let o=new Error("BPMNDiagram <"+t+"> not found");throw Ki(o,[]),o}try{this.clear()}catch(o){throw Ki(o,[]),o}let{warnings:r}=yield is(this,n,i);return{warnings:r}})};be.prototype.saveXML=function(t){return wt(this,null,function*(){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(yield this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(l){i=l}let o=i?{error:i}:{xml:r};if(this._emit("saveXML.done",o),i)throw i;return o})};be.prototype.saveSVG=function(){return wt(this,null,function*(){this._emit("saveSVG.start");let t,n;try{let i=this.get("canvas"),r=i.getActiveLayer(),o=at(":scope > defs",i._svg),l=yr(r),u=o?"<defs>"+yr(o)+"</defs>":"",c=r.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+u+l+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}})};be.prototype._setDefinitions=function(e){this._definitions=e};be.prototype.getModules=function(){return this._modules};be.prototype.clear=function(){this.getDefinitions()&&Pt.prototype.clear.call(this)};be.prototype.destroy=function(){Pt.prototype.destroy.call(this),vn(this._container)};be.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};be.prototype.off=function(e,t){this.get("eventBus").off(e,t)};be.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=at(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};be.prototype.getDefinitions=function(){return this._definitions};be.prototype.detach=function(){let e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};be.prototype._init=function(e,t,n){let i=n.modules||this.getModules(n),r=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],l=[].concat(o,i,r),u=P(_o(n,["additionalModules"]),{canvas:P({},n.canvas,{container:e}),modules:l});Pt.call(this,u),n&&n.container&&this.attachTo(n.container)};be.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};be.prototype._createContainer=function(e){let t=Ke('<div class="bjs-container"></div>');return Ve(t,{width:as(e.width),height:as(e.height),position:e.position}),t};be.prototype._createModdle=function(e){let t=P({},this._moddleExtensions,e.moddleExtensions);return new ts(t)};be.prototype._modules=[];function Ki(e,t){return e.warnings=t,e}function qp(e){let n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}var Yp={width:"100%",height:"100%",position:"relative"};function as(e){return e+(Qe(e)?"px":"")}function Xp(e,t){return t&&Ie(e.diagrams,function(n){return n.id===t})||null}function Zp(e){let n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+zr+"</a>",i=Ke(n);Ve(at("svg",i),Gr),Ve(i,Kr,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),$e.bind(i,"click",function(r){os(),r.preventDefault()})}function en(e){be.call(this,e)}Ne(en,be);en.prototype._modules=[Jo,sa,Ri,ya,xi];en.prototype._moddleExtensions={};var ss=["c","C"],ls=["v","V"],us=["y","Y"],qr=["z","Z"];function cs(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Tt(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function ft(e,t){return e=ke(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function qi(e){return e.shiftKey}function ps(e){return Tt(e)&&ft(ss,e)}function ds(e){return Tt(e)&&ft(ls,e)}function fs(e){return Tt(e)&&!qi(e)&&ft(qr,e)}function hs(e){return Tt(e)&&(ft(us,e)||ft(qr,e)&&qi(e))}var Yi="keyboard.keydown",Qp="keyboard.keyup",Jp=1e3,ms="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function je(e,t){var n=this;this._config=e=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(ms));var i=e&&e.bind!==!1;t.on("canvas.init",function(r){n._target=r.svg,i&&n.bind(),n._fire("init")})}je.$inject=["config.keyboard","eventBus"];je.prototype._keydownHandler=function(e){this._keyHandler(e,Yi)};je.prototype._keyupHandler=function(e){this._keyHandler(e,Qp)};je.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||Yi,i),n&&e.preventDefault()}};je.prototype._isEventIgnored=function(e){return!1};je.prototype.bind=function(e){e&&console.error("unsupported argument <node>",new Error(ms)),this.unbind(),e=this._node=this._target,$e.bind(e,"keydown",this._keydownHandler),$e.bind(e,"keyup",this._keyupHandler),this._fire("bind")};je.prototype.getBinding=function(){return this._node};je.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),$e.unbind(e,"keydown",this._keydownHandler),$e.unbind(e,"keyup",this._keyupHandler)),this._node=null};je.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};je.prototype.addListener=function(e,t,n){Et(e)&&(n=t,t=e,e=Jp),this._eventBus.on(n||Yi,e,t)};je.prototype.removeListener=function(e,t){this._eventBus.off(t||Yi,e)};je.prototype.hasModifier=cs;je.prototype.isCmd=Tt;je.prototype.isShift=qi;je.prototype.isKey=ft;var ed=500;function Wn(e,t){var n=this;e.on("editorActions.init",ed,function(i){var r=i.editorActions;n.registerBindings(t,r)})}Wn.$inject=["eventBus","keyboard"];Wn.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(fs(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(hs(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(ps(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(ds(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(ft(["+","Add","="],r)&&Tt(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(ft(["-","Subtract"],r)&&Tt(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(ft("0",r)&&Tt(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(ft(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};var ys={__init__:["keyboard","keyboardBindings"],keyboard:["type",je],keyboardBindings:["type",Wn]};var td={moveSpeed:50,moveSpeedAccelerated:200};function Xi(e,t,n){var i=this;this._config=P({},td,e||{}),t.addListener(r);function r(o){var l=o.keyEvent,u=i._config;if(t.isCmd(l)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],l)){var c=t.isShift(l)?u.moveSpeedAccelerated:u.moveSpeed,f;switch(l.key){case"ArrowLeft":case"Left":f="left";break;case"ArrowUp":case"Up":f="up";break;case"ArrowRight":case"Right":f="right";break;case"ArrowDown":case"Down":f="down";break}return i.moveCanvas({speed:c,direction:f}),!0}}this.moveCanvas=function(o){var l=0,u=0,c=o.speed,f=c/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":l=f;break;case"up":u=f;break;case"right":l=-f;break;case"down":u=-f;break}n.scroll({dx:l,dy:u})}}Xi.$inject=["config.keyboardMove","keyboard","canvas"];var gs={__depends__:[ys],__init__:["keyboardMove"],keyboardMove:["type",Xi]};var nd=/^djs-cursor-.*$/;function Yr(e){var t=Lt(document.body);t.removeMatching(nd),e&&t.add("djs-cursor-"+e)}function vs(){Yr(null)}var id=5e3;function _s(e,t){t=t||"element.click";function n(){return!1}return e.once(t,id,n),function(){e.off(t,n)}}function Xr(e,t){return{x:e.x-t.x,y:e.y-t.y}}var rd=15;function Zi(e,t){var n;function i(u){return l(u.originalEvent)}e.on("canvas.focus.changed",function(u){u.focused?e.on("element.mousedown",500,i):e.off("element.mousedown",i)});function r(u){var c=n.start,f=n.button,g=Sr(u),C=Xr(g,c);if(!n.dragging&&od(C)>rd&&(n.dragging=!0,f===0&&_s(e),Yr("grab")),n.dragging){var H=n.last||n.start;C=Xr(g,H),t.scroll({dx:C.x,dy:C.y}),n.last=g}u.preventDefault()}function o(u){$e.unbind(document,"mousemove",r),$e.unbind(document,"mouseup",o),n=null,vs()}function l(u){if(!br(u.target,".djs-draggable")){var c=u.button;if(!(c>=2||u.ctrlKey||u.shiftKey||u.altKey))return n={button:c,start:Sr(u)},$e.bind(document,"mousemove",r),$e.bind(document,"mouseup",o),!0}}this.isActive=function(){return!!n}}Zi.$inject=["eventBus","canvas"];function od(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}var Es={__init__:["moveCanvas"],moveCanvas:["type",Zi]};function Un(e){return Math.log(e)/Math.log(10)}function Zr(e,t){var n=Un(e.min),i=Un(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function bs(e,t){return Math.max(e.min,Math.min(e.max,t))}var ad=Math.sign||function(e){return e>=0?1:-1},Qr={min:.2,max:4},xs=10,sd=.1,ld=.75;function ht(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=it(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||ld;var i=this;t.on("canvas.focus.changed",function(r){i._init(r.focused&&e.enabled!==!1)})}ht.$inject=["config.zoomScroll","eventBus","canvas"];ht.prototype.scroll=function(t){this._canvas.scroll(t)};ht.prototype.reset=function(){this._canvas.zoom("fit-viewport")};ht.prototype.zoom=function(t,n){var i=Zr(Qr,xs*2);this._totalDelta+=t,Math.abs(this._totalDelta)>sd&&(this._zoom(t,n,i),this._totalDelta=0)};ht.prototype._handleWheel=function(t){if(this._canvas.isFocused()){var n=this._container;t.preventDefault();var i=t.ctrlKey||la()&&t.metaKey,r=t.shiftKey,o=-1*this._scale,l;if(i?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,i){var u=n.getBoundingClientRect(),c={x:t.clientX-u.left,y:t.clientY-u.top};l=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*ad(t.deltaY)*o,this.zoom(l,c)}else r?l={dx:o*t.deltaY,dy:0}:l={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(l)}};ht.prototype.stepZoom=function(t,n){var i=Zr(Qr,xs);this._zoom(t,n,i)};ht.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=Un(i.zoom()),l=Math.round(o/n)*n;l+=n*r;var u=Math.pow(10,l);i.zoom(bs(Qr,u),t)};ht.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&$e[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};ht.prototype._init=function(e){this.toggle(e)};var Cs={__init__:["zoomScroll"],zoomScroll:["type",ht]};function ln(e){en.call(this,e)}Ne(ln,en);ln.prototype._navigationModules=[gs,Es,Cs];ln.prototype._modules=[].concat(en.prototype._modules,ln.prototype._navigationModules);var Qi=class e{selectedElementId=null;updateSelection(t,n){this.selectedElementId&&n.removeMarker(this.selectedElementId,"selected-element"),t?.id&&(n.addMarker(t.id,"selected-element"),this.selectedElementId=t.id)}clearSelection(){this.selectedElementId=null}getSelectedElementId(){return this.selectedElementId}static \u0275fac=function(n){return new(n||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};var Jr={COMPLETED:"status-completed",ACTIVE:"status-active",SCHEDULED:"status-scheduled",INCIDENT:"status-incident",FAILED:"status-failed",CANCELED:"status-canceled",TERMINATED:"status-terminated"},Ji=class e{applyStatusColoring(t,n,i,r,o){this.clearStatusMarkers(t,n),this.applyProcessStatus(t,n,r,o),this.applyActivityStatuses(i,n,r)}clearStatusMarkers(t,n){t.forEach(i=>Object.values(Jr).forEach(r=>n.removeMarker(i.id,r)))}applyProcessStatus(t,n,i,r){let o=i?.state;if(!o)return;let l=Jr[o];l&&t.filter(u=>r(u)).forEach(u=>n.addMarker(u.id,l))}applyActivityStatuses(t,n,i){i?.activities?.forEach(r=>{let o=t.get(r.definitionId),l=Jr[r.state];o&&l&&n.addMarker(o.id,l)})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};var er=class e{selectionService=Be(Qi);statusService=Be(Ji);elementService=Be(Kt);createViewer(t){return new ln({container:t,mouse:{bindTo:t}})}setupEvents(t,n,i){this.setupWheelZoom(n,t),this.getEventBus(t).on("element.click",r=>i(r.element))}renderDiagram(t,n,i){return wt(this,null,function*(){let r=this.selectionService.getSelectedElementId();if(yield t.importXML(n),this.applyStatusColoring(t,i),r){let l=this.getElementRegistry(t).get(r);l&&this.selectElement(t,l)}})}selectElement(t,n){let i=this.getCanvas(t);this.selectionService.updateSelection(n,i)}getDefaultElement(t){let i=this.getElementRegistry(t).getAll();return this.elementService.findDefaultProcessElement(i)}clear(){this.selectionService.clearSelection()}setupWheelZoom(t,n){t.addEventListener("wheel",i=>{i.preventDefault();let r=this.getCanvas(n);if(i.ctrlKey){let o=Math.exp(-i.deltaY*.006),l=r.zoom(),u=Math.max(.2,Math.min(4,l*o)),c=t.getBoundingClientRect();r.zoom(u,{x:i.clientX-c.left,y:i.clientY-c.top})}else r.scroll({dx:i.deltaX,dy:i.deltaY})},{passive:!1})}applyStatusColoring(t,n){let i=this.getCanvas(t),r=this.getElementRegistry(t),o=r.getAll();this.statusService.applyStatusColoring(o,i,r,n,l=>this.elementService.isProcessElement(l))}getCanvas=t=>t.get("canvas");getElementRegistry=t=>t.get("elementRegistry");getEventBus=t=>t.get("eventBus");static \u0275fac=function(n){return new(n||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};var ud=["bpmnContainer"];function cd(e,t){if(e&1&&(we(0,"div",2),W(1),ve()),e&2){let n=G();S(),Se(" ",n.error()," ")}}var tr=class e{bpmnContainer;definition=te(null);process=te(null);elementSelected=lo();error=Vt("");selected=Vt(null);isFirstRender=Vt(!0);viewer;viewerService=Be(er);elementService=Be(Kt);ngAfterViewInit(){this.initViewer()}ngOnChanges(){this.viewer&&this.renderDiagram()}ngOnDestroy(){this.viewerService.clear(),this.viewer?.destroy()}initViewer(){this.bpmnContainer?.nativeElement&&(this.viewer=this.viewerService.createViewer(this.bpmnContainer.nativeElement),this.setupEvents(),this.renderDiagram())}setupEvents(){this.viewer&&this.viewerService.setupEvents(this.viewer,this.bpmnContainer.nativeElement,t=>this.selectElement(t))}renderDiagram(){return wt(this,null,function*(){let t=this.process()?.definition.metadata.schema??this.definition()?.metadata.schema;if(!(!t||!this.viewer))try{yield this.viewerService.renderDiagram(this.viewer,t,this.process()),this.isFirstRender()&&this.selectDefaultElement()}catch(n){this.error.set(n instanceof Error?n.message:"Failed to render diagram")}finally{this.isFirstRender.set(!1)}})}selectElement(t){if(!this.viewer)return;this.viewerService.selectElement(this.viewer,t);let n=this.elementService.createSelection(t,this.definition(),this.process());this.selected.set(n),this.elementSelected.emit(n)}selectDefaultElement(){if(!this.viewer)return;let t=this.viewerService.getDefaultElement(this.viewer);t&&this.selectElement(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-bpmn-schema-viewer"]],viewQuery:function(n,i){if(n&1&&ro(ud,5),n&2){let r;oo(r=ao())&&(i.bpmnContainer=r.first)}},inputs:{definition:[1,"definition"],process:[1,"process"]},outputs:{elementSelected:"elementSelected"},features:[ir],decls:3,vars:1,consts:[["bpmnContainer",""],[1,"bpmn-container"],["role","alert",1,"alert","alert-danger"]],template:function(n,i){n&1&&(io(0,"div",1,0),ae(2,cd,2,1,"div",2)),n&2&&(S(2),se(i.error()?2:-1))},dependencies:[Kn],styles:[".bpmn-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:500px;position:relative;background-color:#f8f9fa;border:1px solid #dee2e6;border-radius:.375rem}.bpmn-container[_ngcontent-%COMP%]   .djs-container[_ngcontent-%COMP%]{width:100%!important;height:100%!important}.bpmn-container[_ngcontent-%COMP%]   .viewport[_ngcontent-%COMP%]{overflow:hidden}"]})};var ws=class e{definition=te(null);process=te(null);selection=Vt(null);elementService=Be(Kt);updatedSelection=he(()=>{let t=this.selection(),n=this.process(),i=this.definition();return t?this.elementService.createSelection(t.element,i,n):null});onElementSelected(t){this.selection.set(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ee({type:e,selectors:[["app-bpmn-viewer"]],inputs:{definition:[1,"definition"],process:[1,"process"]},decls:5,vars:3,consts:[[1,"row","pt-3","m-1","bpmn-viewer"],[1,"col-9"],[3,"elementSelected","definition","process"],[1,"col-3","bpmn-element-container"],[3,"selection"]],template:function(n,i){n&1&&($(0,"div",0)(1,"main",1)(2,"app-bpmn-schema-viewer",2),Pn("elementSelected",function(o){return i.onElementSelected(o)}),z()(),$(3,"aside",3),le(4,"app-bpmn-element-info-panel",4),z()()),n&2&&(S(2),Y("definition",i.definition())("process",i.process()),S(2),Y("selection",i.updatedSelection()))},dependencies:[tr,ai],styles:[".bpmn-element-container[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.375rem;height:100%;max-height:92vh;overflow-y:auto;padding:0}.bpmn-viewer[_ngcontent-%COMP%]{height:92vh;overflow:hidden}"]})};export{ws as a};
