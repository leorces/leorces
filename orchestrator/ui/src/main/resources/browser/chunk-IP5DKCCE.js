import{a as V}from"./chunk-MN3F5VON.js";import{a as O}from"./chunk-7XBG6V2W.js";import{a as A}from"./chunk-PUOM4FEY.js";import{a as U}from"./chunk-YVYARSZY.js";import{A as M,B as w,E as z,F,G as c,H as d,I as m,J as j,K as n,L as o,M as S,N as k,P as E,Q as $,R as b,X as t,Y as f,Z as x,aa as y,ba as T,d as _,ga as h,h as C,i as P,j as L,o as u,p as I,q as N,s,v as l,x as v}from"./chunk-B4JCPXUQ.js";var R=(a,i)=>i.id;function q(a,i){a&1&&(n(0,"div",0)(1,"div",4)(2,"span",5),t(3,"Loading..."),o()()())}function G(a,i){if(a&1&&(n(0,"div",1),S(1,"i",6),t(2),o()),a&2){let e=b();l(2),x(" ",e.error()," ")}}function J(a,i){a&1&&(n(0,"div",2),S(1,"i",7),n(2,"h5",8),t(3,"No definitions found"),o(),n(4,"p",9),t(5,"There are no process definitions to display."),o()())}function Q(a,i){if(a&1){let e=k();n(0,"tr")(1,"td")(2,"a",11),$("click",function(){let g=I(e).$implicit,p=b(2);return N(p.viewDetails(g.id))}),t(3),o()(),n(4,"td"),t(5),o(),n(6,"td"),t(7),o(),n(8,"td"),t(9),y(10,"dateFormat"),o(),n(11,"td"),t(12),y(13,"dateFormat"),o()()}if(a&2){let e=i.$implicit;l(3),x(" ",e.name," "),l(2),f(e.key),l(2),f(e.version),l(2),f(T(10,5,e.createdAt)),l(3),f(T(13,7,e.updatedAt))}}function W(a,i){if(a&1&&(n(0,"div",3)(1,"table",10)(2,"thead")(3,"tr")(4,"th"),t(5,"Name"),o(),n(6,"th"),t(7,"Key"),o(),n(8,"th"),t(9,"Version"),o(),n(10,"th"),t(11,"Created"),o(),n(12,"th"),t(13,"Updated"),o()()(),n(14,"tbody"),z(15,Q,14,9,"tr",null,R),o(),n(17,"tfoot")(18,"tr")(19,"td")(20,"strong"),t(21,"Name"),o()(),n(22,"td")(23,"strong"),t(24,"Key"),o()(),n(25,"td")(26,"strong"),t(27,"Version"),o()(),n(28,"td")(29,"strong"),t(30,"Created"),o()(),n(31,"td")(32,"strong"),t(33,"Updated"),o()()()()()()),a&2){let e=b();l(15),F(e.definitions())}}var D=class a{definitions=h([]);loading=h(!1);error=h(null);router=u(O);viewDetails(i){this.router.toDefinition(i)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=v({type:a,selectors:[["app-definition-list-table"]],inputs:{definitions:[1,"definitions"],loading:[1,"loading"],error:[1,"error"]},decls:4,vars:1,consts:[[1,"d-flex","justify-content-center","align-items-center","py-5"],["role","alert",1,"alert","alert-danger"],[1,"text-center","py-5"],["role","grid","aria-describedby","dataTable_info",1,"table-responsive","table","small","mt-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"bi","bi-inbox","display-4","text-muted"],[1,"mt-3","text-muted"],[1,"text-muted"],[1,"table","my-0"],["href","javascript:void(0)","title","View Process Details",1,"text-primary","text-decoration-none",3,"click"]],template:function(e,r){e&1&&M(0,q,4,0,"div",0)(1,G,3,1,"div",1)(2,J,6,0,"div",2)(3,W,34,0,"div",3),e&2&&w(r.loading()&&r.definitions().length===0?0:r.error()?1:r.definitions().length===0?2:3)},dependencies:[U],encapsulation:2})};var B=class a{definitions=s([]);loading=s(!1);error=s(null);currentPage=s(1);pageSize=s(10);totalItems=s(0);filter=s("");definitionService=u(A);destroy$=new _;searchSubject=new _;constructor(){this.searchSubject.pipe(C(300),P(),L(this.destroy$)).subscribe(i=>{this.filter.set(i),this.currentPage.set(1),this.loadDefinitions()})}ngOnInit(){this.loadDefinitions()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onFilterChange(i){let e=i.target;this.searchSubject.next(e.value)}onPageChange(i){this.currentPage.set(i),this.loadDefinitions()}onPageSizeChange(i){let e=i.target,r=parseInt(e.value,10);this.pageSize.set(r),this.currentPage.set(1),this.loadDefinitions()}loadDefinitions(){this.loading.set(!0);let i={page:this.currentPage()-1,size:this.pageSize(),filter:this.filter(),state:"all",sortByField:"created_at",order:"DESC"};this.definitionService.findAll(i).subscribe({next:e=>{this.loading.set(!1),this.definitions.set(e.data),this.totalItems.set(e.total)},error:e=>{this.loading.set(!1),this.error.set("Failed to load definitions. Please try again later...")}})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=v({type:a,selectors:[["app-definition-list"]],decls:24,vars:8,consts:[[1,"container","pt-5"],[1,"text-dark","mb-4"],[1,"row"],[1,"col-md-6","text-nowrap"],["aria-controls","dataTable","id","dataTable_length",1,"dataTables_length"],[1,"form-label"],[1,"d-inline-block","form-select","form-select-sm",3,"change","value"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-md-6"],[1,"text-md-end","dataTables_filter"],["aria-controls","dataTable","placeholder","Search","type","search",1,"form-control","form-control-sm",3,"input","value"],[3,"definitions","error","loading"],[3,"pageChange","currentPage","pageSize","totalItems"]],template:function(e,r){e&1&&(d(0,"main",0)(1,"h3",1),t(2,"Definitions"),m(),d(3,"div")(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),t(8,"Show "),d(9,"select",6),E("change",function(p){return r.onPageSizeChange(p)}),d(10,"option",7),t(11,"10"),m(),d(12,"option",8),t(13,"25"),m(),d(14,"option",9),t(15,"50"),m(),d(16,"option",10),t(17,"100"),m()()()()(),d(18,"div",11)(19,"div",12)(20,"label",5)(21,"input",13),E("input",function(p){return r.onFilterChange(p)}),m()()()()(),j(22,"app-definition-list-table",14),d(23,"app-pagination",15),E("pageChange",function(p){return r.onPageChange(p)}),m()()()),e&2&&(l(9),c("value",r.pageSize()),l(12),c("value",r.filter()),l(),c("definitions",r.definitions())("error",r.error())("loading",r.loading()),l(),c("currentPage",r.currentPage())("pageSize",r.pageSize())("totalItems",r.totalItems()))},dependencies:[D,V],encapsulation:2})};export{B as DefinitionList};
